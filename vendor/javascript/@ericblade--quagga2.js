// @ericblade/quagga2@1.8.4 downloaded from https://ga.jspm.io/npm:@ericblade/quagga2@1.8.4/dist/quagga.min.js

var L="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var N={};!function(L,Rt){N=Rt()}(window,(function(){return function(L){var N={};function n(Rt){if(N[Rt])return N[Rt].exports;var Ct=N[Rt]={i:Rt,l:!1,exports:{}};return L[Rt].call(Ct.exports,Ct,Ct.exports,n),Ct.l=!0,Ct.exports}return n.m=L,n.c=N,n.d=function(L,N,Rt){n.o(L,N)||Object.defineProperty(L,N,{enumerable:!0,get:Rt})},n.r=function(L){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},n.t=function(L,N){if(1&N&&(L=n(L)),8&N)return L;if(4&N&&"object"==typeof L&&L&&L.__esModule)return L;var Rt=Object.create(null);if(n.r(Rt),Object.defineProperty(Rt,"default",{enumerable:!0,value:L}),2&N&&"string"!=typeof L)for(var Ct in L)n.d(Rt,Ct,function(N){return L[N]}.bind(null,Ct));return Rt},n.n=function(L){var N=L&&L.__esModule?function(){return L.default}:function(){return L};return n.d(N,"a",N),N},n.o=function(L,N){return Object.prototype.hasOwnProperty.call(L,N)},n.p="/",n(n.s=73)}([function(L,N,Rt){var Ct=Rt(61);L.exports=function(L,N,Rt){return(N=Ct(N))in L?Object.defineProperty(L,N,{value:Rt,enumerable:!0,configurable:!0,writable:!0}):L[N]=Rt,L},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(L){if(void 0===L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){function n(N){return L.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(L){return L.__proto__||Object.getPrototypeOf(L)},L.exports.__esModule=!0,L.exports.default=L.exports,n(N)}L.exports=n,L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(L,N){if(!(L instanceof N))throw new TypeError("Cannot call a class as a function")},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(61);function o(L,N){for(var Rt=0;Rt<N.length;Rt++){var St=N[Rt];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(L,Ct(St.key),St)}}L.exports=function(L,N,Rt){return N&&o(L.prototype,N),Rt&&o(L,Rt),Object.defineProperty(L,"prototype",{writable:!1}),L},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){Rt.d(N,"a",(function(){return Ct})),Rt.d(N,"b",(function(){return St})),Rt.d(N,"c",(function(){return Pt})),Rt.d(N,"d",(function(){return xe}));var Ct={};Rt.r(Ct),Rt.d(Ct,"EPSILON",(function(){return _e})),Rt.d(Ct,"ARRAY_TYPE",(function(){return be})),Rt.d(Ct,"RANDOM",(function(){return we})),Rt.d(Ct,"setMatrixArrayType",(function(){return f})),Rt.d(Ct,"toRadian",(function(){return d})),Rt.d(Ct,"equals",(function(){return h}));var St={};Rt.r(St),Rt.d(St,"create",(function(){return v})),Rt.d(St,"clone",(function(){return p})),Rt.d(St,"copy",(function(){return y})),Rt.d(St,"identity",(function(){return g})),Rt.d(St,"fromValues",(function(){return x})),Rt.d(St,"set",(function(){return m})),Rt.d(St,"transpose",(function(){return _})),Rt.d(St,"invert",(function(){return b})),Rt.d(St,"adjoint",(function(){return w})),Rt.d(St,"determinant",(function(){return O})),Rt.d(St,"multiply",(function(){return R})),Rt.d(St,"rotate",(function(){return M})),Rt.d(St,"scale",(function(){return C})),Rt.d(St,"fromRotation",(function(){return E})),Rt.d(St,"fromScaling",(function(){return A})),Rt.d(St,"str",(function(){return S})),Rt.d(St,"frob",(function(){return k})),Rt.d(St,"LDU",(function(){return P})),Rt.d(St,"add",(function(){return T})),Rt.d(St,"subtract",(function(){return D})),Rt.d(St,"exactEquals",(function(){return j})),Rt.d(St,"equals",(function(){return I})),Rt.d(St,"multiplyScalar",(function(){return z})),Rt.d(St,"multiplyScalarAndAdd",(function(){return U})),Rt.d(St,"mul",(function(){return Re})),Rt.d(St,"sub",(function(){return Me}));var Pt={};Rt.r(Pt),Rt.d(Pt,"create",(function(){return F})),Rt.d(Pt,"clone",(function(){return B})),Rt.d(Pt,"fromValues",(function(){return W})),Rt.d(Pt,"copy",(function(){return q})),Rt.d(Pt,"set",(function(){return V})),Rt.d(Pt,"add",(function(){return G})),Rt.d(Pt,"subtract",(function(){return H})),Rt.d(Pt,"multiply",(function(){return X})),Rt.d(Pt,"divide",(function(){return Q})),Rt.d(Pt,"ceil",(function(){return Y})),Rt.d(Pt,"floor",(function(){return $})),Rt.d(Pt,"min",(function(){return Z})),Rt.d(Pt,"max",(function(){return K})),Rt.d(Pt,"round",(function(){return J})),Rt.d(Pt,"scale",(function(){return tt})),Rt.d(Pt,"scaleAndAdd",(function(){return et})),Rt.d(Pt,"distance",(function(){return nt})),Rt.d(Pt,"squaredDistance",(function(){return rt})),Rt.d(Pt,"length",(function(){return ot})),Rt.d(Pt,"squaredLength",(function(){return it})),Rt.d(Pt,"negate",(function(){return at})),Rt.d(Pt,"inverse",(function(){return ut})),Rt.d(Pt,"normalize",(function(){return ct})),Rt.d(Pt,"dot",(function(){return st})),Rt.d(Pt,"cross",(function(){return ft})),Rt.d(Pt,"lerp",(function(){return lt})),Rt.d(Pt,"random",(function(){return dt})),Rt.d(Pt,"transformMat2",(function(){return ht})),Rt.d(Pt,"transformMat2d",(function(){return vt})),Rt.d(Pt,"transformMat3",(function(){return pt})),Rt.d(Pt,"transformMat4",(function(){return yt})),Rt.d(Pt,"rotate",(function(){return gt})),Rt.d(Pt,"angle",(function(){return xt})),Rt.d(Pt,"zero",(function(){return mt})),Rt.d(Pt,"str",(function(){return _t})),Rt.d(Pt,"exactEquals",(function(){return bt})),Rt.d(Pt,"equals",(function(){return wt})),Rt.d(Pt,"len",(function(){return Te})),Rt.d(Pt,"sub",(function(){return Le})),Rt.d(Pt,"mul",(function(){return Ne})),Rt.d(Pt,"div",(function(){return Fe})),Rt.d(Pt,"dist",(function(){return Be})),Rt.d(Pt,"sqrDist",(function(){return We})),Rt.d(Pt,"sqrLen",(function(){return qe})),Rt.d(Pt,"forEach",(function(){return Ve}));var xe={};Rt.r(xe),Rt.d(xe,"create",(function(){return Tt})),Rt.d(xe,"clone",(function(){return Dt})),Rt.d(xe,"length",(function(){return jt})),Rt.d(xe,"fromValues",(function(){return It})),Rt.d(xe,"copy",(function(){return zt})),Rt.d(xe,"set",(function(){return Ut})),Rt.d(xe,"add",(function(){return Lt})),Rt.d(xe,"subtract",(function(){return Nt})),Rt.d(xe,"multiply",(function(){return Ft})),Rt.d(xe,"divide",(function(){return Bt})),Rt.d(xe,"ceil",(function(){return Wt})),Rt.d(xe,"floor",(function(){return qt})),Rt.d(xe,"min",(function(){return Vt})),Rt.d(xe,"max",(function(){return Gt})),Rt.d(xe,"round",(function(){return Ht})),Rt.d(xe,"scale",(function(){return Xt})),Rt.d(xe,"scaleAndAdd",(function(){return Qt})),Rt.d(xe,"distance",(function(){return Yt})),Rt.d(xe,"squaredDistance",(function(){return $t})),Rt.d(xe,"squaredLength",(function(){return Zt})),Rt.d(xe,"negate",(function(){return Kt})),Rt.d(xe,"inverse",(function(){return Jt})),Rt.d(xe,"normalize",(function(){return te})),Rt.d(xe,"dot",(function(){return ee})),Rt.d(xe,"cross",(function(){return ne})),Rt.d(xe,"lerp",(function(){return re})),Rt.d(xe,"hermite",(function(){return oe})),Rt.d(xe,"bezier",(function(){return ie})),Rt.d(xe,"random",(function(){return ae})),Rt.d(xe,"transformMat4",(function(){return ue})),Rt.d(xe,"transformMat3",(function(){return ce})),Rt.d(xe,"transformQuat",(function(){return se})),Rt.d(xe,"rotateX",(function(){return fe})),Rt.d(xe,"rotateY",(function(){return le})),Rt.d(xe,"rotateZ",(function(){return de})),Rt.d(xe,"angle",(function(){return he})),Rt.d(xe,"zero",(function(){return ve})),Rt.d(xe,"str",(function(){return pe})),Rt.d(xe,"exactEquals",(function(){return ye})),Rt.d(xe,"equals",(function(){return ge})),Rt.d(xe,"sub",(function(){return Ge})),Rt.d(xe,"mul",(function(){return Xe})),Rt.d(xe,"div",(function(){return He})),Rt.d(xe,"dist",(function(){return Qe})),Rt.d(xe,"sqrDist",(function(){return Ye})),Rt.d(xe,"len",(function(){return $e})),Rt.d(xe,"sqrLen",(function(){return Ze})),Rt.d(xe,"forEach",(function(){return Ke}));var _e=1e-6,be="undefined"!=typeof Float32Array?Float32Array:Array,we=Math.random;function f(L){be=L}var Oe=Math.PI/180;function d(L){return L*Oe}function h(L,N){return Math.abs(L-N)<=_e*Math.max(1,Math.abs(L),Math.abs(N))}function v(){var L=new be(4);return be!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L}function p(L){var N=new be(4);return N[0]=L[0],N[1]=L[1],N[2]=L[2],N[3]=L[3],N}function y(L,N){return L[0]=N[0],L[1]=N[1],L[2]=N[2],L[3]=N[3],L}function g(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=1,L}function x(L,N,Rt,Ct){var St=new be(4);return St[0]=L,St[1]=N,St[2]=Rt,St[3]=Ct,St}function m(L,N,Rt,Ct,St){return L[0]=N,L[1]=Rt,L[2]=Ct,L[3]=St,L}function _(L,N){if(L===N){var Rt=N[1];L[1]=N[2],L[2]=Rt}else L[0]=N[0],L[1]=N[2],L[2]=N[1],L[3]=N[3];return L}function b(L,N){var Rt=N[0],Ct=N[1],St=N[2],Pt=N[3],xe=Rt*Pt-St*Ct;return xe?(xe=1/xe,L[0]=Pt*xe,L[1]=-Ct*xe,L[2]=-St*xe,L[3]=Rt*xe,L):null}function w(L,N){var Rt=N[0];return L[0]=N[3],L[1]=-N[1],L[2]=-N[2],L[3]=Rt,L}function O(L){return L[0]*L[3]-L[2]*L[1]}function R(L,N,Rt){var Ct=N[0],St=N[1],Pt=N[2],xe=N[3],_e=Rt[0],be=Rt[1],we=Rt[2],Oe=Rt[3];return L[0]=Ct*_e+Pt*be,L[1]=St*_e+xe*be,L[2]=Ct*we+Pt*Oe,L[3]=St*we+xe*Oe,L}function M(L,N,Rt){var Ct=N[0],St=N[1],Pt=N[2],xe=N[3],_e=Math.sin(Rt),be=Math.cos(Rt);return L[0]=Ct*be+Pt*_e,L[1]=St*be+xe*_e,L[2]=Ct*-_e+Pt*be,L[3]=St*-_e+xe*be,L}function C(L,N,Rt){var Ct=N[0],St=N[1],Pt=N[2],xe=N[3],_e=Rt[0],be=Rt[1];return L[0]=Ct*_e,L[1]=St*_e,L[2]=Pt*be,L[3]=xe*be,L}function E(L,N){var Rt=Math.sin(N),Ct=Math.cos(N);return L[0]=Ct,L[1]=Rt,L[2]=-Rt,L[3]=Ct,L}function A(L,N){return L[0]=N[0],L[1]=0,L[2]=0,L[3]=N[1],L}function S(L){return"mat2("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+")"}function k(L){return Math.hypot(L[0],L[1],L[2],L[3])}function P(L,N,Rt,Ct){return L[2]=Ct[2]/Ct[0],Rt[0]=Ct[0],Rt[1]=Ct[1],Rt[3]=Ct[3]-L[2]*Rt[1],[L,N,Rt]}function T(L,N,Rt){return L[0]=N[0]+Rt[0],L[1]=N[1]+Rt[1],L[2]=N[2]+Rt[2],L[3]=N[3]+Rt[3],L}function D(L,N,Rt){return L[0]=N[0]-Rt[0],L[1]=N[1]-Rt[1],L[2]=N[2]-Rt[2],L[3]=N[3]-Rt[3],L}function j(L,N){return L[0]===N[0]&&L[1]===N[1]&&L[2]===N[2]&&L[3]===N[3]}function I(L,N){var Rt=L[0],Ct=L[1],St=L[2],Pt=L[3],xe=N[0],be=N[1],we=N[2],Oe=N[3];return Math.abs(Rt-xe)<=_e*Math.max(1,Math.abs(Rt),Math.abs(xe))&&Math.abs(Ct-be)<=_e*Math.max(1,Math.abs(Ct),Math.abs(be))&&Math.abs(St-we)<=_e*Math.max(1,Math.abs(St),Math.abs(we))&&Math.abs(Pt-Oe)<=_e*Math.max(1,Math.abs(Pt),Math.abs(Oe))}function z(L,N,Rt){return L[0]=N[0]*Rt,L[1]=N[1]*Rt,L[2]=N[2]*Rt,L[3]=N[3]*Rt,L}function U(L,N,Rt,Ct){return L[0]=N[0]+Rt[0]*Ct,L[1]=N[1]+Rt[1]*Ct,L[2]=N[2]+Rt[2]*Ct,L[3]=N[3]+Rt[3]*Ct,L}Math.hypot||(Math.hypot=function(){for(var L=0,N=arguments.length;N--;)L+=arguments[N]*arguments[N];return Math.sqrt(L)});var Re=R,Me=D;function F(){var L=new be(2);return be!=Float32Array&&(L[0]=0,L[1]=0),L}function B(L){var N=new be(2);return N[0]=L[0],N[1]=L[1],N}function W(L,N){var Rt=new be(2);return Rt[0]=L,Rt[1]=N,Rt}function q(L,N){return L[0]=N[0],L[1]=N[1],L}function V(L,N,Rt){return L[0]=N,L[1]=Rt,L}function G(L,N,Rt){return L[0]=N[0]+Rt[0],L[1]=N[1]+Rt[1],L}function H(L,N,Rt){return L[0]=N[0]-Rt[0],L[1]=N[1]-Rt[1],L}function X(L,N,Rt){return L[0]=N[0]*Rt[0],L[1]=N[1]*Rt[1],L}function Q(L,N,Rt){return L[0]=N[0]/Rt[0],L[1]=N[1]/Rt[1],L}function Y(L,N){return L[0]=Math.ceil(N[0]),L[1]=Math.ceil(N[1]),L}function $(L,N){return L[0]=Math.floor(N[0]),L[1]=Math.floor(N[1]),L}function Z(L,N,Rt){return L[0]=Math.min(N[0],Rt[0]),L[1]=Math.min(N[1],Rt[1]),L}function K(L,N,Rt){return L[0]=Math.max(N[0],Rt[0]),L[1]=Math.max(N[1],Rt[1]),L}function J(L,N){return L[0]=Math.round(N[0]),L[1]=Math.round(N[1]),L}function tt(L,N,Rt){return L[0]=N[0]*Rt,L[1]=N[1]*Rt,L}function et(L,N,Rt,Ct){return L[0]=N[0]+Rt[0]*Ct,L[1]=N[1]+Rt[1]*Ct,L}function nt(L,N){var Rt=N[0]-L[0],Ct=N[1]-L[1];return Math.hypot(Rt,Ct)}function rt(L,N){var Rt=N[0]-L[0],Ct=N[1]-L[1];return Rt*Rt+Ct*Ct}function ot(L){var N=L[0],Rt=L[1];return Math.hypot(N,Rt)}function it(L){var N=L[0],Rt=L[1];return N*N+Rt*Rt}function at(L,N){return L[0]=-N[0],L[1]=-N[1],L}function ut(L,N){return L[0]=1/N[0],L[1]=1/N[1],L}function ct(L,N){var Rt=N[0],Ct=N[1],St=Rt*Rt+Ct*Ct;return St>0&&(St=1/Math.sqrt(St)),L[0]=N[0]*St,L[1]=N[1]*St,L}function st(L,N){return L[0]*N[0]+L[1]*N[1]}function ft(L,N,Rt){var Ct=N[0]*Rt[1]-N[1]*Rt[0];return L[0]=L[1]=0,L[2]=Ct,L}function lt(L,N,Rt,Ct){var St=N[0],Pt=N[1];return L[0]=St+Ct*(Rt[0]-St),L[1]=Pt+Ct*(Rt[1]-Pt),L}function dt(L,N){N=N||1;var Rt=2*we()*Math.PI;return L[0]=Math.cos(Rt)*N,L[1]=Math.sin(Rt)*N,L}function ht(L,N,Rt){var Ct=N[0],St=N[1];return L[0]=Rt[0]*Ct+Rt[2]*St,L[1]=Rt[1]*Ct+Rt[3]*St,L}function vt(L,N,Rt){var Ct=N[0],St=N[1];return L[0]=Rt[0]*Ct+Rt[2]*St+Rt[4],L[1]=Rt[1]*Ct+Rt[3]*St+Rt[5],L}function pt(L,N,Rt){var Ct=N[0],St=N[1];return L[0]=Rt[0]*Ct+Rt[3]*St+Rt[6],L[1]=Rt[1]*Ct+Rt[4]*St+Rt[7],L}function yt(L,N,Rt){var Ct=N[0],St=N[1];return L[0]=Rt[0]*Ct+Rt[4]*St+Rt[12],L[1]=Rt[1]*Ct+Rt[5]*St+Rt[13],L}function gt(L,N,Rt,Ct){var St=N[0]-Rt[0],Pt=N[1]-Rt[1],xe=Math.sin(Ct),_e=Math.cos(Ct);return L[0]=St*_e-Pt*xe+Rt[0],L[1]=St*xe+Pt*_e+Rt[1],L}function xt(L,N){var Rt=L[0],Ct=L[1],St=N[0],Pt=N[1],xe=Math.sqrt(Rt*Rt+Ct*Ct)*Math.sqrt(St*St+Pt*Pt),_e=xe&&(Rt*St+Ct*Pt)/xe;return Math.acos(Math.min(Math.max(_e,-1),1))}function mt(L){return L[0]=0,L[1]=0,L}function _t(L){return"vec2("+L[0]+", "+L[1]+")"}function bt(L,N){return L[0]===N[0]&&L[1]===N[1]}function wt(L,N){var Rt=L[0],Ct=L[1],St=N[0],Pt=N[1];return Math.abs(Rt-St)<=_e*Math.max(1,Math.abs(Rt),Math.abs(St))&&Math.abs(Ct-Pt)<=_e*Math.max(1,Math.abs(Ct),Math.abs(Pt))}var Ce,Te=ot,Le=H,Ne=X,Fe=Q,Be=nt,We=rt,qe=it,Ve=(Ce=F(),function(L,N,Rt,Ct,St,Pt){var xe,_e;for(N||(N=2),Rt||(Rt=0),_e=Ct?Math.min(Ct*N+Rt,L.length):L.length,xe=Rt;xe<_e;xe+=N)Ce[0]=L[xe],Ce[1]=L[xe+1],St(Ce,Ce,Pt),L[xe]=Ce[0],L[xe+1]=Ce[1];return L});function Tt(){var L=new be(3);return be!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L}function Dt(L){var N=new be(3);return N[0]=L[0],N[1]=L[1],N[2]=L[2],N}function jt(L){var N=L[0],Rt=L[1],Ct=L[2];return Math.hypot(N,Rt,Ct)}function It(L,N,Rt){var Ct=new be(3);return Ct[0]=L,Ct[1]=N,Ct[2]=Rt,Ct}function zt(L,N){return L[0]=N[0],L[1]=N[1],L[2]=N[2],L}function Ut(L,N,Rt,Ct){return L[0]=N,L[1]=Rt,L[2]=Ct,L}function Lt(L,N,Rt){return L[0]=N[0]+Rt[0],L[1]=N[1]+Rt[1],L[2]=N[2]+Rt[2],L}function Nt(L,N,Rt){return L[0]=N[0]-Rt[0],L[1]=N[1]-Rt[1],L[2]=N[2]-Rt[2],L}function Ft(L,N,Rt){return L[0]=N[0]*Rt[0],L[1]=N[1]*Rt[1],L[2]=N[2]*Rt[2],L}function Bt(L,N,Rt){return L[0]=N[0]/Rt[0],L[1]=N[1]/Rt[1],L[2]=N[2]/Rt[2],L}function Wt(L,N){return L[0]=Math.ceil(N[0]),L[1]=Math.ceil(N[1]),L[2]=Math.ceil(N[2]),L}function qt(L,N){return L[0]=Math.floor(N[0]),L[1]=Math.floor(N[1]),L[2]=Math.floor(N[2]),L}function Vt(L,N,Rt){return L[0]=Math.min(N[0],Rt[0]),L[1]=Math.min(N[1],Rt[1]),L[2]=Math.min(N[2],Rt[2]),L}function Gt(L,N,Rt){return L[0]=Math.max(N[0],Rt[0]),L[1]=Math.max(N[1],Rt[1]),L[2]=Math.max(N[2],Rt[2]),L}function Ht(L,N){return L[0]=Math.round(N[0]),L[1]=Math.round(N[1]),L[2]=Math.round(N[2]),L}function Xt(L,N,Rt){return L[0]=N[0]*Rt,L[1]=N[1]*Rt,L[2]=N[2]*Rt,L}function Qt(L,N,Rt,Ct){return L[0]=N[0]+Rt[0]*Ct,L[1]=N[1]+Rt[1]*Ct,L[2]=N[2]+Rt[2]*Ct,L}function Yt(L,N){var Rt=N[0]-L[0],Ct=N[1]-L[1],St=N[2]-L[2];return Math.hypot(Rt,Ct,St)}function $t(L,N){var Rt=N[0]-L[0],Ct=N[1]-L[1],St=N[2]-L[2];return Rt*Rt+Ct*Ct+St*St}function Zt(L){var N=L[0],Rt=L[1],Ct=L[2];return N*N+Rt*Rt+Ct*Ct}function Kt(L,N){return L[0]=-N[0],L[1]=-N[1],L[2]=-N[2],L}function Jt(L,N){return L[0]=1/N[0],L[1]=1/N[1],L[2]=1/N[2],L}function te(L,N){var Rt=N[0],Ct=N[1],St=N[2],Pt=Rt*Rt+Ct*Ct+St*St;return Pt>0&&(Pt=1/Math.sqrt(Pt)),L[0]=N[0]*Pt,L[1]=N[1]*Pt,L[2]=N[2]*Pt,L}function ee(L,N){return L[0]*N[0]+L[1]*N[1]+L[2]*N[2]}function ne(L,N,Rt){var Ct=N[0],St=N[1],Pt=N[2],xe=Rt[0],_e=Rt[1],be=Rt[2];return L[0]=St*be-Pt*_e,L[1]=Pt*xe-Ct*be,L[2]=Ct*_e-St*xe,L}function re(L,N,Rt,Ct){var St=N[0],Pt=N[1],xe=N[2];return L[0]=St+Ct*(Rt[0]-St),L[1]=Pt+Ct*(Rt[1]-Pt),L[2]=xe+Ct*(Rt[2]-xe),L}function oe(L,N,Rt,Ct,St,Pt){var xe=Pt*Pt,_e=xe*(2*Pt-3)+1,be=xe*(Pt-2)+Pt,we=xe*(Pt-1),Oe=xe*(3-2*Pt);return L[0]=N[0]*_e+Rt[0]*be+Ct[0]*we+St[0]*Oe,L[1]=N[1]*_e+Rt[1]*be+Ct[1]*we+St[1]*Oe,L[2]=N[2]*_e+Rt[2]*be+Ct[2]*we+St[2]*Oe,L}function ie(L,N,Rt,Ct,St,Pt){var xe=1-Pt,_e=xe*xe,be=Pt*Pt,we=_e*xe,Oe=3*Pt*_e,Re=3*be*xe,Me=be*Pt;return L[0]=N[0]*we+Rt[0]*Oe+Ct[0]*Re+St[0]*Me,L[1]=N[1]*we+Rt[1]*Oe+Ct[1]*Re+St[1]*Me,L[2]=N[2]*we+Rt[2]*Oe+Ct[2]*Re+St[2]*Me,L}function ae(L,N){N=N||1;var Rt=2*we()*Math.PI,Ct=2*we()-1,St=Math.sqrt(1-Ct*Ct)*N;return L[0]=Math.cos(Rt)*St,L[1]=Math.sin(Rt)*St,L[2]=Ct*N,L}function ue(L,N,Rt){var Ct=N[0],St=N[1],Pt=N[2],xe=Rt[3]*Ct+Rt[7]*St+Rt[11]*Pt+Rt[15];return xe=xe||1,L[0]=(Rt[0]*Ct+Rt[4]*St+Rt[8]*Pt+Rt[12])/xe,L[1]=(Rt[1]*Ct+Rt[5]*St+Rt[9]*Pt+Rt[13])/xe,L[2]=(Rt[2]*Ct+Rt[6]*St+Rt[10]*Pt+Rt[14])/xe,L}function ce(L,N,Rt){var Ct=N[0],St=N[1],Pt=N[2];return L[0]=Ct*Rt[0]+St*Rt[3]+Pt*Rt[6],L[1]=Ct*Rt[1]+St*Rt[4]+Pt*Rt[7],L[2]=Ct*Rt[2]+St*Rt[5]+Pt*Rt[8],L}function se(L,N,Rt){var Ct=Rt[0],St=Rt[1],Pt=Rt[2],xe=Rt[3],_e=N[0],be=N[1],we=N[2],Oe=St*we-Pt*be,Re=Pt*_e-Ct*we,Me=Ct*be-St*_e,Ce=St*Me-Pt*Re,Te=Pt*Oe-Ct*Me,Le=Ct*Re-St*Oe,Ne=2*xe;return Oe*=Ne,Re*=Ne,Me*=Ne,Ce*=2,Te*=2,Le*=2,L[0]=_e+Oe+Ce,L[1]=be+Re+Te,L[2]=we+Me+Le,L}function fe(L,N,Rt,Ct){var St=[],Pt=[];return St[0]=N[0]-Rt[0],St[1]=N[1]-Rt[1],St[2]=N[2]-Rt[2],Pt[0]=St[0],Pt[1]=St[1]*Math.cos(Ct)-St[2]*Math.sin(Ct),Pt[2]=St[1]*Math.sin(Ct)+St[2]*Math.cos(Ct),L[0]=Pt[0]+Rt[0],L[1]=Pt[1]+Rt[1],L[2]=Pt[2]+Rt[2],L}function le(L,N,Rt,Ct){var St=[],Pt=[];return St[0]=N[0]-Rt[0],St[1]=N[1]-Rt[1],St[2]=N[2]-Rt[2],Pt[0]=St[2]*Math.sin(Ct)+St[0]*Math.cos(Ct),Pt[1]=St[1],Pt[2]=St[2]*Math.cos(Ct)-St[0]*Math.sin(Ct),L[0]=Pt[0]+Rt[0],L[1]=Pt[1]+Rt[1],L[2]=Pt[2]+Rt[2],L}function de(L,N,Rt,Ct){var St=[],Pt=[];return St[0]=N[0]-Rt[0],St[1]=N[1]-Rt[1],St[2]=N[2]-Rt[2],Pt[0]=St[0]*Math.cos(Ct)-St[1]*Math.sin(Ct),Pt[1]=St[0]*Math.sin(Ct)+St[1]*Math.cos(Ct),Pt[2]=St[2],L[0]=Pt[0]+Rt[0],L[1]=Pt[1]+Rt[1],L[2]=Pt[2]+Rt[2],L}function he(L,N){var Rt=L[0],Ct=L[1],St=L[2],Pt=N[0],xe=N[1],_e=N[2],be=Math.sqrt(Rt*Rt+Ct*Ct+St*St)*Math.sqrt(Pt*Pt+xe*xe+_e*_e),we=be&&ee(L,N)/be;return Math.acos(Math.min(Math.max(we,-1),1))}function ve(L){return L[0]=0,L[1]=0,L[2]=0,L}function pe(L){return"vec3("+L[0]+", "+L[1]+", "+L[2]+")"}function ye(L,N){return L[0]===N[0]&&L[1]===N[1]&&L[2]===N[2]}function ge(L,N){var Rt=L[0],Ct=L[1],St=L[2],Pt=N[0],xe=N[1],be=N[2];return Math.abs(Rt-Pt)<=_e*Math.max(1,Math.abs(Rt),Math.abs(Pt))&&Math.abs(Ct-xe)<=_e*Math.max(1,Math.abs(Ct),Math.abs(xe))&&Math.abs(St-be)<=_e*Math.max(1,Math.abs(St),Math.abs(be))}var Ge=Nt,Xe=Ft,He=Bt,Qe=Yt,Ye=$t,$e=jt,Ze=Zt,Ke=function(){var L=Tt();return function(N,Rt,Ct,St,Pt,xe){var _e,be;for(Rt||(Rt=3),Ct||(Ct=0),be=St?Math.min(St*Rt+Ct,N.length):N.length,_e=Ct;_e<be;_e+=Rt)L[0]=N[_e],L[1]=N[_e+1],L[2]=N[_e+2],Pt(L,L,xe),N[_e]=L[0],N[_e+1]=L[1],N[_e+2]=L[2];return N}}()},function(L,N,Rt){var Ct=Rt(13).default,St=Rt(1);L.exports=function(L,N){if(N&&("object"===Ct(N)||"function"==typeof N))return N;if(void 0!==N)throw new TypeError("Derived constructors may only return object or undefined");return St(L)},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(40);L.exports=function(L,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(N&&N.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),N&&Ct(L,N)},L.exports.__esModule=!0,L.exports.default=L.exports},function(N,Rt,Ct){var St=Ct(141)();N.exports=St;try{L.regeneratorRuntime=St}catch(N){"object"==typeof globalThis?globalThis.regeneratorRuntime=St:Function("r","regeneratorRuntime = r")(St)}},function(L,N,Rt){N.a={init:function(L,N){L.fill(N)},shuffle:function(L){for(var N=L.length-1;N>0;N--){var Rt=Math.floor(Math.random()*(N+1)),Ct=[L[Rt],L[N]];L[N]=Ct[0],L[Rt]=Ct[1]}return L},toPointList:function(L){var N=L.reduce((function(L,N){var Rt="[".concat(N.join(","),"]");return L.push(Rt),L}),[]);return"[".concat(N.join(",\r\n"),"]")},threshold:function(L,N,Rt){return L.reduce((function(Ct,St){return Rt.apply(L,[St])>=N&&Ct.push(St),Ct}),[])},maxIndex:function(L){for(var N=0,Rt=0;Rt<L.length;Rt++)L[Rt]>L[N]&&(N=Rt);return N},max:function(L){for(var N=0,Rt=0;Rt<L.length;Rt++)L[Rt]>N&&(N=L[Rt]);return N},sum:function(L){for(var N=L.length,Rt=0;N--;)Rt+=L[N];return Rt}}},function(N,Rt,Ct){Ct.d(Rt,"h",(function(){return u})),Ct.d(Rt,"i",(function(){return s})),Ct.d(Rt,"b",(function(){return f})),Ct.d(Rt,"j",(function(){return l})),Ct.d(Rt,"e",(function(){return d})),Ct.d(Rt,"c",(function(){return h})),Ct.d(Rt,"f",(function(){return v})),Ct.d(Rt,"g",(function(){return p})),Ct.d(Rt,"a",(function(){return g})),Ct.d(Rt,"d",(function(){return m}));var St=Ct(5),Pt=Ct(9);St.a.setMatrixArrayType(Array);var i=function(L,N){var Rt=[],Ct={rad:0,vec:St.c.clone([0,0])},Pt={};function a(L){Pt[L.id]=L,Rt.push(L)}function u(){var L,N=0;for(L=0;L<Rt.length;L++)N+=Rt[L].rad;Ct.rad=N/Rt.length,Ct.vec=St.c.clone([Math.cos(Ct.rad),Math.sin(Ct.rad)])}return a(L),u(),{add:function(L){Pt[L.id]||(a(L),u())},fits:function(L){return Math.abs(St.c.dot(L.point.vec,Ct.vec))>N},getPoints:function(){return Rt},getCenter:function(){return Ct}}},a=function(L,N,Rt){return{rad:L[Rt],point:L,id:N}};function u(N,Rt){return{x:N,y:Rt,toVec2:function(){return St.c.clone([(this||L).x,(this||L).y])},toVec3:function(){return St.d.clone([(this||L).x,(this||L).y,1])},round:function(){return(this||L).x=(this||L).x>0?Math.floor((this||L).x+.5):Math.floor((this||L).x-.5),(this||L).y=(this||L).y>0?Math.floor((this||L).y+.5):Math.floor((this||L).y-.5),this||L}}}function c(L,N){N||(N=8);for(var Rt=L.data,Ct=Rt.length,St=8-N,Pt=new Int32Array(1<<N);Ct--;)Pt[Rt[Ct]>>St]++;return Pt}function s(L,N){var Rt=function(L){var N,Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,Ct=8-Rt;function i(L,Rt){for(var Ct=0,St=L;St<=Rt;St++)Ct+=N[St];return Ct}function a(L,Rt){for(var Ct=0,St=L;St<=Rt;St++)Ct+=St*N[St];return Ct}function u(){var Ct,St,xe,_e,be=[0],we=(1<<Rt)-1;N=c(L,Rt);for(var Oe=1;Oe<we;Oe++)0===(xe=(Ct=i(0,Oe))*(St=i(Oe+1,we)))&&(xe=1),_e=a(0,Oe)*St-a(Oe+1,we)*Ct,be[Oe]=_e*_e/xe;return Pt.a.maxIndex(be)}var St=u();return St<<Ct}(L);return function(L,N,Rt){Rt||(Rt=L);for(var Ct=L.data,St=Ct.length,Pt=Rt.data;St--;)Pt[St]=Ct[St]<N?1:0}(L,Rt,N),Rt}function f(L,N,Rt){var Ct,St,Pt,xe,_e=[];function f(L){var N=!1;for(St=0;St<_e.length;St++)(Pt=_e[St]).fits(L)&&(Pt.add(L),N=!0);return N}for(Rt||(Rt="rad"),Ct=0;Ct<L.length;Ct++)f(xe=a(L[Ct],Ct,Rt))||_e.push(i(xe,N));return _e}St.a.setMatrixArrayType(Array);function l(N,Rt,Ct){var St,Pt,xe,_e,be=0,we=0,Oe=[];for(St=0;St<Rt;St++)Oe[St]={score:0,item:null};for(St=0;St<N.length;St++)if((Pt=Ct.apply(this||L,[N[St]]))>we)for((xe=Oe[be]).score=Pt,xe.item=N[St],we=Number.MAX_VALUE,_e=0;_e<Rt;_e++)Oe[_e].score<we&&(we=Oe[_e].score,be=_e);return Oe}function d(L,N,Rt){for(var Ct,St=0,Pt=N.x,xe=Math.floor(L.length/4),_e=N.x/2,be=0,we=N.x;Pt<xe;){for(Ct=0;Ct<_e;Ct++)Rt[be]=(.299*L[4*St+0]+.587*L[4*St+1]+.114*L[4*St+2]+(.299*L[4*(St+1)+0]+.587*L[4*(St+1)+1]+.114*L[4*(St+1)+2])+(.299*L[4*Pt+0]+.587*L[4*Pt+1]+.114*L[4*Pt+2])+(.299*L[4*(Pt+1)+0]+.587*L[4*(Pt+1)+1]+.114*L[4*(Pt+1)+2]))/4,be++,St+=2,Pt+=2;St+=we,Pt+=we}}function h(L,N,Rt){var Ct=L.length/4|0;if(Rt&&!0===Rt.singleChannel)for(var St=0;St<Ct;St++)N[St]=L[4*St+0];else for(var Pt=0;Pt<Ct;Pt++)N[Pt]=.299*L[4*Pt+0]+.587*L[4*Pt+1]+.114*L[4*Pt+2]}function v(L,N){for(var Rt=L.data,Ct=L.size.x,St=N.data,Pt=0,xe=Ct,_e=Rt.length,be=Ct/2,we=0;xe<_e;){for(var Oe=0;Oe<be;Oe++)St[we]=Math.floor((Rt[Pt]+Rt[Pt+1]+Rt[xe]+Rt[xe+1])/4),we++,Pt+=2,xe+=2;Pt+=Ct,xe+=Ct}}function p(L){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],Rt=L[0],Ct=L[1],St=L[2],Pt=St*Ct,xe=Pt*(1-Math.abs(Rt/60%2-1)),_e=St-Pt,be=0,we=0,Oe=0;return Rt<60?(be=Pt,we=xe):Rt<120?(be=xe,we=Pt):Rt<180?(we=Pt,Oe=xe):Rt<240?(we=xe,Oe=Pt):Rt<300?(be=xe,Oe=Pt):Rt<360&&(be=Pt,Oe=xe),N[0]=255*(be+_e)|0,N[1]=255*(we+_e)|0,N[2]=255*(Oe+_e)|0,N}function y(L){for(var N=[],Rt=[],Ct=1;Ct<Math.sqrt(L)+1;Ct++)L%Ct==0&&(Rt.push(Ct),Ct!==L/Ct&&N.unshift(Math.floor(L/Ct)));return Rt.concat(N)}function g(L,N){var Rt,Ct=y(N.x),St=y(N.y),Pt=Math.max(N.x,N.y),xe=function(L,N){for(var Rt=0,Ct=0,St=[];Rt<L.length&&Ct<N.length;)L[Rt]===N[Ct]?(St.push(L[Rt]),Rt++,Ct++):L[Rt]>N[Ct]?Ct++:Rt++;return St}(Ct,St),_e=[8,10,15,20,32,60,80],be={"x-small":5,small:4,medium:3,large:2,"x-large":1},we=be[L]||be.medium,Oe=_e[we],Re=Math.floor(Pt/Oe);function d(L){for(var N=0,Rt=L[Math.floor(L.length/2)];N<L.length-1&&L[N]<Re;)N++;return N>0&&(Rt=Math.abs(L[N]-Re)>Math.abs(L[N-1]-Re)?L[N-1]:L[N]),Re/Rt<_e[we+1]/_e[we]&&Re/Rt>_e[we-1]/_e[we]?{x:Rt,y:Rt}:null}return(Rt=d(xe))||(Rt=d(y(Pt)))||(Rt=d(y(Re*Oe))),Rt}var xe={top:function(L,N){return"%"===L.unit?Math.floor(N.height*(L.value/100)):null},right:function(L,N){return"%"===L.unit?Math.floor(N.width-N.width*(L.value/100)):null},bottom:function(L,N){return"%"===L.unit?Math.floor(N.height-N.height*(L.value/100)):null},left:function(L,N){return"%"===L.unit?Math.floor(N.width*(L.value/100)):null}};function m(L,N,Rt){var Ct={width:L,height:N},St=Object.keys(Rt).reduce((function(L,N){var St=function(L){return{value:parseFloat(L),unit:(L.indexOf("%"),L.length,"%")}}(Rt[N]),Pt=xe[N](St,Ct);return L[N]=Pt,L}),{});return{sx:St.left,sy:St.top,sw:St.right-St.left,sh:St.bottom-St.top}}},function(N,Rt,Ct){var St=Ct(62),Pt=Ct.n(St),xe=Ct(3),_e=Ct.n(xe),be=Ct(4),we=Ct.n(be),Oe=Ct(0),Re=Ct.n(Oe),Me=Ct(5),Ce=Ct(9),Te=Ct(10);function v(L){if(L<0)throw new Error("expected positive number, received ".concat(L))}Me.a.setMatrixArrayType(Array);var Le=function(){function t(N,Rt){var Ct=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,St=arguments.length>3?arguments[3]:void 0;_e()(this||L,t),Re()(this||L,"data",void 0),Re()(this||L,"size",void 0),Re()(this||L,"indexMapping",void 0),Rt?(this||L).data=Rt:((this||L).data=new Ct(N.x*N.y),St&&Ce.a.init((this||L).data,0)),(this||L).size=N}return we()(t,[{key:"inImageWithBorder",value:function(N){var Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return v(Rt),N.x>=0&&N.y>=0&&N.x<(this||L).size.x+2*Rt&&N.y<(this||L).size.y+2*Rt}},{key:"subImageAsCopy",value:function(N,Rt){v(Rt.x),v(Rt.y);for(var Ct=N.size,St=Ct.x,Pt=Ct.y,xe=0;xe<St;xe++)for(var _e=0;_e<Pt;_e++)N.data[_e*St+xe]=(this||L).data[(Rt.y+_e)*(this||L).size.x+Rt.x+xe];return N}},{key:"get",value:function(N,Rt){return(this||L).data[Rt*(this||L).size.x+N]}},{key:"getSafe",value:function(N,Rt){if(!(this||L).indexMapping){(this||L).indexMapping={x:[],y:[]};for(var Ct=0;Ct<(this||L).size.x;Ct++)(this||L).indexMapping.x[Ct]=Ct,(this||L).indexMapping.x[Ct+(this||L).size.x]=Ct;for(var St=0;St<(this||L).size.y;St++)(this||L).indexMapping.y[St]=St,(this||L).indexMapping.y[St+(this||L).size.y]=St}return(this||L).data[(this||L).indexMapping.y[Rt+(this||L).size.y]*(this||L).size.x+(this||L).indexMapping.x[N+(this||L).size.x]]}},{key:"set",value:function(N,Rt,Ct){return(this||L).data[Rt*(this||L).size.x+N]=Ct,delete(this||L).indexMapping,this||L}},{key:"zeroBorder",value:function(){for(var N=(this||L).size,Rt=N.x,Ct=N.y,St=0;St<Rt;St++)(this||L).data[St]=(this||L).data[(Ct-1)*Rt+St]=0;for(var Pt=1;Pt<Ct-1;Pt++)(this||L).data[Pt*Rt]=(this||L).data[Pt*Rt+(Rt-1)]=0;return delete(this||L).indexMapping,this||L}},{key:"moments",value:function(N){var Rt,Ct,St,Pt,xe,_e,be,we,Oe,Re,Ce=(this||L).data,Te=(this||L).size.y,Le=(this||L).size.x,Ne=[],Fe=[],Be=Math.PI,We=Be/4;if(N<=0)return Fe;for(xe=0;xe<N;xe++)Ne[xe]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(Ct=0;Ct<Te;Ct++)for(Pt=Ct*Ct,Rt=0;Rt<Le;Rt++)(St=Ce[Ct*Le+Rt])>0&&((_e=Ne[St-1]).m00+=1,_e.m01+=Ct,_e.m10+=Rt,_e.m11+=Rt*Ct,_e.m02+=Pt,_e.m20+=Rt*Rt);for(xe=0;xe<N;xe++)_e=Ne[xe],isNaN(_e.m00)||0===_e.m00||(we=_e.m10/_e.m00,Oe=_e.m01/_e.m00,be=_e.m11/_e.m00-we*Oe,Re=(_e.m02/_e.m00-Oe*Oe-(_e.m20/_e.m00-we*we))/(2*be),Re=.5*Math.atan(Re)+(be>=0?We:-We)+Be,_e.theta=(180*Re/Be+90)%180-90,_e.theta<0&&(_e.theta+=180),_e.rad=Re>Be?Re-Be:Re,_e.vec=Me.c.clone([Math.cos(Re),Math.sin(Re)]),Fe.push(_e));return Fe}},{key:"getAsRGBA",value:function(){for(var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,Rt=new Uint8ClampedArray(4*(this||L).size.x*(this||L).size.y),Ct=0;Ct<(this||L).size.y;Ct++)for(var St=0;St<(this||L).size.x;St++){var Pt=Ct*(this||L).size.x+St,xe=this.get(St,Ct)*N;Rt[4*Pt+0]=xe,Rt[4*Pt+1]=xe,Rt[4*Pt+2]=xe,Rt[4*Pt+3]=255}return Rt}},{key:"show",value:function(N){var Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var Ct=N.getContext("2d");if(!Ct)throw new Error("Unable to get canvas context");var St=Ct.getImageData(0,0,N.width,N.height),Pt=this.getAsRGBA(Rt);N.width=(this||L).size.x,N.height=(this||L).size.y;var xe=new ImageData(Pt,St.width,St.height);Ct.putImageData(xe,0,0)}},{key:"overlay",value:function(N,Rt,Ct){var St=Rt<0||Rt>360?360:Rt,xe=[0,1,1],_e=[0,0,0],be=[255,255,255],we=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var Oe=N.getContext("2d");if(!Oe)throw new Error("Unable to get canvas context");for(var Re=Oe.getImageData(Ct.x,Ct.y,(this||L).size.x,(this||L).size.y),Me=Re.data,Ce=(this||L).data.length;Ce--;){xe[0]=(this||L).data[Ce]*St;var Le=4*Ce,Ne=xe[0]<=0?be:xe[0]>=360?we:Object(Te.g)(xe,_e),Fe=Pt()(Ne,3);Me[Le]=Fe[0],Me[Le+1]=Fe[1],Me[Le+2]=Fe[2],Me[Le+3]=255}Oe.putImageData(Re,Ct.x,Ct.y)}}]),t}();Rt.a=Le},function(N,Rt){function n(L,N,Rt,Ct,St,Pt,xe){try{var _e=L[Pt](xe),be=_e.value}catch(L){return void Rt(L)}_e.done?N(be):Promise.resolve(be).then(Ct,St)}N.exports=function(N){return function(){var Rt=this||L,Ct=arguments;return new Promise((function(L,St){var Pt=N.apply(Rt,Ct);function u(N){n(Pt,L,St,u,c,"next",N)}function c(N){n(Pt,L,St,u,c,"throw",N)}u(void 0)}))}},N.exports.__esModule=!0,N.exports.default=N.exports},function(L,N){function n(N){return L.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},L.exports.__esModule=!0,L.exports.default=L.exports,n(N)}L.exports=n,L.exports.__esModule=!0,L.exports.default=L.exports},function(N,Rt,Ct){var St=Ct(142);function o(){return"undefined"!=typeof Reflect&&Reflect.get?(N.exports=o=Reflect.get.bind(),N.exports.__esModule=!0,N.exports.default=N.exports):(N.exports=o=function(L,N,Rt){var Ct=St(L,N);if(Ct){var Pt=Object.getOwnPropertyDescriptor(Ct,N);return Pt.get?Pt.get.call(arguments.length<3?L:Rt):Pt.value}},N.exports.__esModule=!0,N.exports.default=N.exports),o.apply(this||L,arguments)}N.exports=o,N.exports.__esModule=!0,N.exports.default=N.exports},function(L,N){L.exports=function(L){var N=typeof L;return null!=L&&("object"==N||"function"==N)}},function(L,N){var Rt=Array.isArray;L.exports=Rt},function(L,N,Rt){N.a={drawRect:function(L,N,Rt,Ct){Rt.strokeStyle=Ct.color,Rt.fillStyle=Ct.color,Rt.lineWidth=Ct.lineWidth||1,Rt.beginPath(),Rt.strokeRect(L.x,L.y,N.x,N.y)},drawPath:function(L,N,Rt,Ct){Rt.strokeStyle=Ct.color,Rt.fillStyle=Ct.color,Rt.lineWidth=Ct.lineWidth,Rt.beginPath(),Rt.moveTo(L[0][N.x],L[0][N.y]);for(var St=1;St<L.length;St++)Rt.lineTo(L[St][N.x],L[St][N.y]);Rt.closePath(),Rt.stroke()},drawImage:function(L,N,Rt){var Ct=Rt.getImageData(0,0,N.x,N.y),St=Ct.data,Pt=St.length,xe=L.length;if(Pt/xe!=4)return!1;for(;xe--;){var _e=L[xe];St[--Pt]=255,St[--Pt]=_e,St[--Pt]=_e,St[--Pt]=_e}return Rt.putImageData(Ct,0,0),!0}}},function(L,N,Rt){var Ct=Rt(74),St=Rt(129)((function(L,N,Rt){Ct(L,N,Rt)}));L.exports=St},function(L,N,Rt){var Ct=Rt(44),St="object"==typeof self&&self&&self.Object===Object&&self,Pt=Ct||St||Function("return this")();L.exports=Pt},function(L,N){L.exports=function(L){return null!=L&&"object"==typeof L}},function(N,Rt,Ct){Rt.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(N,Rt){var Ct,St=N.data,Pt=Rt.data,xe=(this||L).searchDirections,_e=N.size.x;function u(L,N,Rt,be){var we,Oe,Re;for(we=0;we<xe.length;we++){if(Oe=L.cy+xe[L.dir][0],Re=L.cx+xe[L.dir][1],St[Ct=Oe*_e+Re]===N&&(0===Pt[Ct]||Pt[Ct]===Rt))return Pt[Ct]=Rt,L.cy=Oe,L.cx=Re,!0;0===Pt[Ct]&&(Pt[Ct]=be),L.dir=(L.dir+1)%8}return!1}function c(L,N,Rt){return{dir:Rt,x:L,y:N,next:null,prev:null}}return{trace:function(L,N,Rt,Ct){return u(L,N,Rt,Ct)},contourTracing:function(L,Rt,Ct,St,Pt){return function(L,Rt,Ct,St,Pt){var xe,_e,be,we=null,Oe={cx:Rt,cy:L,dir:0};if(u(Oe,St,Ct,Pt)){xe=we=c(Rt,L,Oe.dir),be=Oe.dir,(_e=c(Oe.cx,Oe.cy,0)).prev=xe,xe.next=_e,_e.next=null,xe=_e;var Re=N.size.x*N.size.y,Me=0;do{Oe.dir=(Oe.dir+6)%8,u(Oe,St,Ct,Pt),be!==Oe.dir?(xe.dir=Oe.dir,(_e=c(Oe.cx,Oe.cy,0)).prev=xe,xe.next=_e,_e.next=null,xe=_e):(xe.dir=be,xe.x=Oe.cx,xe.y=Oe.cy),be=Oe.dir}while((Oe.cx!==Rt||Oe.cy!==L)&&++Me<Re);we.prev=xe.prev,xe.prev.next=we}return we}(L,Rt,Ct,St,Pt)}}}}},function(L,N,Rt){var Ct=Rt(27),St=Rt(87),Pt=Rt(88),xe=Ct?Ct.toStringTag:void 0;L.exports=function(L){return null==L?void 0===L?"[object Undefined]":"[object Null]":xe&&xe in Object(L)?St(L):Pt(L)}},function(N,Rt,Ct){(function(L){var N,St,Pt,xe,_e,be,we,Oe,Re,Me,Ce=Ct(5),Te=Ct(11),Le=Ct(10),Ne=Ct(9),Fe=(Ct(17),Ct(65)),Be=Ct(21),We=Ct(66);Ce.a.setMatrixArrayType(Array);var qe,Ve,Ge={ctx:{binary:null},dom:{binary:null}},Xe={x:0,y:0};function R(L){var Rt,Ct,St,Pt,xe,_e,be,we=Re.size.x,Oe=Re.size.y,Me=-Re.size.x,Te=-Re.size.y;for(Rt=0,Ct=0;Ct<L.length;Ct++)Rt+=(Pt=L[Ct]).rad;for((Rt=(180*(Rt/=L.length)/Math.PI+90)%180-90)<0&&(Rt+=180),Rt=(180-Rt)*Math.PI/180,xe=Ce.b.copy(Ce.b.create(),[Math.cos(Rt),Math.sin(Rt),-Math.sin(Rt),Math.cos(Rt)]),Ct=0;Ct<L.length;Ct++){for(Pt=L[Ct],St=0;St<4;St++)Ce.c.transformMat2(Pt.box[St],Pt.box[St],xe);0}for(Ct=0;Ct<L.length;Ct++)for(Pt=L[Ct],St=0;St<4;St++)Pt.box[St][0]<we&&(we=Pt.box[St][0]),Pt.box[St][0]>Me&&(Me=Pt.box[St][0]),Pt.box[St][1]<Oe&&(Oe=Pt.box[St][1]),Pt.box[St][1]>Te&&(Te=Pt.box[St][1]);for(_e=[[we,Oe],[Me,Oe],[Me,Te],[we,Te]],be=N.halfSample?2:1,xe=Ce.b.invert(xe,xe),St=0;St<4;St++)Ce.c.transformMat2(_e[St],_e[St],xe);for(St=0;St<4;St++)Ce.c.scale(_e[St],_e[St],be);return _e}function M(L,N){Re.subImageAsCopy(xe,Object(Le.h)(L,N)),Ve.skeletonize()}function C(L,N,Rt,Ct){var St,Pt,_e,be,we=[],Oe=[],Re=Math.ceil(Me.x/3);if(L.length>=2){for(St=0;St<L.length;St++)L[St].m00>Re&&we.push(L[St]);if(we.length>=2){for(_e=function(L){var N=Object(Le.b)(L,.9),Rt=Object(Le.j)(N,1,(function(L){return L.getPoints().length})),Ct=[],St=[];if(1===Rt.length){Ct=Rt[0].item.getPoints();for(var Pt=0;Pt<Ct.length;Pt++)St.push(Ct[Pt].point)}return St}(we),Pt=0,St=0;St<_e.length;St++){var Te,Ne;Pt+=null!==(Te=null===(Ne=_e[St])||void 0===Ne?void 0:Ne.rad)&&void 0!==Te?Te:0}_e.length>1&&_e.length>=we.length/4*3&&_e.length>L.length/4&&(Pt/=_e.length,be={index:N[1]*Xe.x+N[0],pos:{x:Rt,y:Ct},box:[Ce.c.clone([Rt,Ct]),Ce.c.clone([Rt+xe.size.x,Ct]),Ce.c.clone([Rt+xe.size.x,Ct+xe.size.y]),Ce.c.clone([Rt,Ct+xe.size.y])],moments:_e,rad:Pt,vec:Ce.c.clone([Math.cos(Pt),Math.sin(Pt)])},Oe.push(be))}}return Oe}Rt.a={init:function(Rt,Ct){N=Ct,qe=Rt,function(){St=N.halfSample?new Te.a({x:qe.size.x/2|0,y:qe.size.y/2|0}):qe,Me=Object(Le.a)(N.patchSize,St.size),Xe.x=St.size.x/Me.x|0,Xe.y=St.size.y/Me.y|0,Re=new Te.a(St.size,void 0,Uint8Array,!1),_e=new Te.a(Me,void 0,Array,!0);var Rt=new ArrayBuffer(65536);xe=new Te.a(Me,new Uint8Array(Rt,0,Me.x*Me.y)),Pt=new Te.a(Me,new Uint8Array(Rt,Me.x*Me.y*3,Me.x*Me.y),void 0,!0),Ve=Object(We.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:L,{size:Me.x},Rt),Oe=new Te.a({x:St.size.x/xe.size.x|0,y:St.size.y/xe.size.y|0},void 0,Array,!0),be=new Te.a(Oe.size,void 0,void 0,!0),we=new Te.a(Oe.size,void 0,Int32Array,!0)}(),function(){if(!N.useWorker&&"undefined"!=typeof document){Ge.dom.binary=document.createElement("canvas"),Ge.dom.binary.className="binaryBuffer";var L=!!N.willReadFrequently;console.warn("* initCanvas willReadFrequently",L,N),Ge.ctx.binary=Ge.dom.binary.getContext("2d",{willReadFrequently:L}),Ge.dom.binary.width=Re.size.x,Ge.dom.binary.height=Re.size.y}}()},locate:function(){N.halfSample&&Object(Le.f)(qe,St),Object(Le.i)(St,Re),Re.zeroBorder();var L=function(){var L,N,Rt,Ct,St,be,we=[];for(L=0;L<Xe.x;L++)for(N=0;N<Xe.y;N++)M(Rt=xe.size.x*L,Ct=xe.size.y*N),Pt.zeroBorder(),Ne.a.init(_e.data,0),be=Fe.a.create(Pt,_e).rasterize(0),St=_e.moments(be.count),we=we.concat(C(St,[L,N],Rt,Ct));return we}();if(L.length<Xe.x*Xe.y*.05)return null;var Rt=function(L){var N,Rt,Ct=0,St=0;function i(){var L;for(L=0;L<we.data.length;L++)if(0===we.data[L]&&1===be.data[L])return L;return we.data.length}function a(L){var N,Rt,St,Pt,xe,_e=L%we.size.x,Re=L/we.size.x|0;if(L<we.data.length)for(St=Oe.data[L],we.data[L]=Ct,xe=0;xe<Be.a.searchDirections.length;xe++)Rt=Re+Be.a.searchDirections[xe][0],N=_e+Be.a.searchDirections[xe][1],Pt=Rt*we.size.x+N,0!==be.data[Pt]?0===we.data[Pt]&&Math.abs(Ce.c.dot(Oe.data[Pt].vec,St.vec))>.95&&a(Pt):we.data[Pt]=Number.MAX_VALUE}for(Ne.a.init(be.data,0),Ne.a.init(we.data,0),Ne.a.init(Oe.data,null),N=0;N<L.length;N++)Rt=L[N],Oe.data[Rt.index]=Rt,be.data[Rt.index]=1;for(be.zeroBorder();(St=i())<we.data.length;)Ct++,a(St);return Ct}(L);if(Rt<1)return null;var Ct=function(L){var N,Rt,Ct=[];for(N=0;N<L;N++)Ct.push(0);for(Rt=we.data.length;Rt--;)we.data[Rt]>0&&Ct[we.data[Rt]-1]++;return(Ct=Ct.map((function(L,N){return{val:L,label:N+1}}))).sort((function(L,N){return N.val-L.val})),Ct.filter((function(L){return L.val>=5}))}(Rt);return 0===Ct.length?null:function(L,N){var Rt,Ct,St,Pt,xe=[],_e=[];for(Rt=0;Rt<L.length;Rt++){for(Ct=we.data.length,xe.length=0;Ct--;)we.data[Ct]===L[Rt].label&&(St=Oe.data[Ct],xe.push(St));(Pt=R(xe))&&_e.push(Pt)}return _e}(Ct)},checkImageConstraints:function(L,N){var Rt,Ct,St=L.getWidth(),Pt=L.getHeight(),xe=N.halfSample?.5:1;L.getConfig().area&&(Ct=Object(Le.d)(St,Pt,L.getConfig().area),L.setTopRight({x:Ct.sx,y:Ct.sy}),L.setCanvasSize({x:St,y:Pt}),St=Ct.sw,Pt=Ct.sh);var _e={x:Math.floor(St*xe),y:Math.floor(Pt*xe)};if(Rt=Object(Le.a)(N.patchSize,_e),L.setWidth(Math.max(Math.floor(Math.floor(_e.x/Rt.x)*(1/xe)*Rt.x),Rt.x)),L.setHeight(Math.max(Math.floor(Math.floor(_e.y/Rt.y)*(1/xe)*Rt.y),Rt.y)),L.getWidth()%Rt.x==0&&L.getHeight()%Rt.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(St," )and height (").concat(Pt,") must a multiple of ").concat(Rt.x))}}}).call(this||L,Ct(45))},function(L,N,Rt){var Ct=Rt(76),St=Rt(77),Pt=Rt(78),xe=Rt(79),_e=Rt(80);function c(L){var N=-1,Rt=null==L?0:L.length;for(this.clear();++N<Rt;){var Ct=L[N];this.set(Ct[0],Ct[1])}}c.prototype.clear=Ct,c.prototype.delete=St,c.prototype.get=Pt,c.prototype.has=xe,c.prototype.set=_e,L.exports=c},function(L,N,Rt){var Ct=Rt(26);L.exports=function(L,N){for(var Rt=L.length;Rt--;)if(Ct(L[Rt][0],N))return Rt;return-1}},function(L,N){L.exports=function(L,N){return L===N||L!=L&&N!=N}},function(L,N,Rt){var Ct=Rt(19).Symbol;L.exports=Ct},function(L,N,Rt){var Ct=Rt(34)(Object,"create");L.exports=Ct},function(L,N,Rt){var Ct=Rt(101);L.exports=function(L,N){var Rt=L.__data__;return Ct(N)?Rt["string"==typeof N?"string":"hash"]:Rt.map}},function(L,N,Rt){var Ct=Rt(116),St=Rt(20),Pt=Object.prototype,xe=Pt.hasOwnProperty,_e=Pt.propertyIsEnumerable,be=Ct(function(){return arguments}())?Ct:function(L){return St(L)&&xe.call(L,"callee")&&!_e.call(L,"callee")};L.exports=be},function(L,N){var Rt=/^(?:0|[1-9]\d*)$/;L.exports=function(L,N){var Ct=typeof L;return!!(N=null==N?9007199254740991:N)&&("number"==Ct||"symbol"!=Ct&&Rt.test(L))&&L>-1&&L%1==0&&L<N}},function(L,N,Rt){var Ct=Rt(16),St=Rt(149),Pt=Rt(150),xe=Rt(153);L.exports=function(L,N){return Ct(L)?L:St(L,N)?[L]:Pt(xe(L))}},function(L,N,Rt){var Ct=Rt(143),St=Rt(144),Pt=Rt(59),xe=Rt(145);L.exports=function(L){return Ct(L)||St(L)||Pt(L)||xe()},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(86),St=Rt(92);L.exports=function(L,N){var Rt=St(L,N);return Ct(Rt)?Rt:void 0}},function(L,N,Rt){var Ct=Rt(22),St=Rt(15);L.exports=function(L){if(!St(L))return!1;var N=Ct(L);return"[object Function]"==N||"[object GeneratorFunction]"==N||"[object AsyncFunction]"==N||"[object Proxy]"==N}},function(L,N,Rt){var Ct=Rt(48);L.exports=function(L,N,Rt){"__proto__"==N&&Ct?Ct(L,N,{configurable:!0,enumerable:!0,value:Rt,writable:!0}):L[N]=Rt}},function(L,N){L.exports=function(L){return L.webpackPolyfill||(L.deprecate=function(){},L.paths=[],L.children||(L.children=[]),Object.defineProperty(L,"loaded",{enumerable:!0,get:function(){return L.l}}),Object.defineProperty(L,"id",{enumerable:!0,get:function(){return L.i}}),L.webpackPolyfill=1),L}},function(L,N,Rt){var Ct=Rt(35),St=Rt(39);L.exports=function(L){return null!=L&&St(L.length)&&!Ct(L)}},function(L,N){L.exports=function(L){return"number"==typeof L&&L>-1&&L%1==0&&L<=9007199254740991}},function(L,N){function n(N,Rt){return L.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,N){return L.__proto__=N,L},L.exports.__esModule=!0,L.exports.default=L.exports,n(N,Rt)}L.exports=n,L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(22),St=Rt(20);L.exports=function(L){return"symbol"==typeof L||St(L)&&"[object Symbol]"==Ct(L)}},function(L,N,Rt){var Ct=Rt(41);L.exports=function(L){if("string"==typeof L||Ct(L))return L;var N=L+"";return"0"==N&&1/L==-1/0?"-0":N}},function(L,N,Rt){var Ct=Rt(34)(Rt(19),"Map");L.exports=Ct},function(N,Rt,Ct){(function(L){var Rt="object"==typeof L&&L&&L.Object===Object&&L;N.exports=Rt}).call(this||L,Ct(45))},function(N,Rt){var Ct;Ct=function(){return this||L}();try{Ct=Ct||new Function("return this")()}catch(N){"object"==typeof window&&(Ct=window)}N.exports=Ct},function(L,N,Rt){var Ct=Rt(93),St=Rt(100),Pt=Rt(102),xe=Rt(103),_e=Rt(104);function c(L){var N=-1,Rt=null==L?0:L.length;for(this.clear();++N<Rt;){var Ct=L[N];this.set(Ct[0],Ct[1])}}c.prototype.clear=Ct,c.prototype.delete=St,c.prototype.get=Pt,c.prototype.has=xe,c.prototype.set=_e,L.exports=c},function(L,N,Rt){var Ct=Rt(36),St=Rt(26);L.exports=function(L,N,Rt){(void 0!==Rt&&!St(L[N],Rt)||void 0===Rt&&!(N in L))&&Ct(L,N,Rt)}},function(L,N,Rt){var Ct=Rt(34),St=function(){try{var L=Ct(Object,"defineProperty");return L({},"",{}),L}catch(L){}}();L.exports=St},function(L,N,Rt){var Ct=Rt(115)(Object.getPrototypeOf,Object);L.exports=Ct},function(L,N){var Rt=Object.prototype;L.exports=function(L){var N=L&&L.constructor;return L===("function"==typeof N&&N.prototype||Rt)}},function(N,Rt,Ct){(function(L){var N=Ct(19),St=Ct(118),Pt=Rt&&!Rt.nodeType&&Rt,xe=Pt&&"object"==typeof L&&L&&!L.nodeType&&L,_e=xe&&xe.exports===Pt?N.Buffer:void 0,be=(_e?_e.isBuffer:void 0)||St;L.exports=be}).call(this||L,Ct(37)(N))},function(L,N,Rt){var Ct=Rt(120),St=Rt(121),Pt=Rt(122),xe=Pt&&Pt.isTypedArray,_e=xe?St(xe):Ct;L.exports=_e},function(L,N){L.exports=function(L,N){if(("constructor"!==N||"function"!=typeof L[N])&&"__proto__"!=N)return L[N]}},function(L,N,Rt){var Ct=Rt(36),St=Rt(26),Pt=Object.prototype.hasOwnProperty;L.exports=function(L,N,Rt){var xe=L[N];Pt.call(L,N)&&St(xe,Rt)&&(void 0!==Rt||N in L)||Ct(L,N,Rt)}},function(L,N,Rt){var Ct=Rt(125),St=Rt(127),Pt=Rt(38);L.exports=function(L){return Pt(L)?Ct(L,!0):St(L)}},function(L,N){L.exports=function(L){return L}},function(N,Rt,Ct){var St=Ct(131),Pt=Math.max;N.exports=function(N,Rt,Ct){return Rt=Pt(void 0===Rt?N.length-1:Rt,0),function(){for(var xe=arguments,_e=-1,be=Pt(xe.length-Rt,0),we=Array(be);++_e<be;)we[_e]=xe[Rt+_e];_e=-1;for(var Oe=Array(Rt+1);++_e<Rt;)Oe[_e]=xe[_e];return Oe[Rt]=Ct(we),St(N,this||L,Oe)}}},function(L,N,Rt){var Ct=Rt(132),St=Rt(134)(Ct);L.exports=St},function(L,N,Rt){var Ct=Rt(60);L.exports=function(L,N){if(L){if("string"==typeof L)return Ct(L,N);var Rt=Object.prototype.toString.call(L).slice(8,-1);return"Object"===Rt&&L.constructor&&(Rt=L.constructor.name),"Map"===Rt||"Set"===Rt?Array.from(L):"Arguments"===Rt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rt)?Ct(L,N):void 0}},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(L,N){(null==N||N>L.length)&&(N=L.length);for(var Rt=0,Ct=new Array(N);Rt<N;Rt++)Ct[Rt]=L[Rt];return Ct},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(13).default,St=Rt(140);L.exports=function(L){var N=St(L,"string");return"symbol"===Ct(N)?N:String(N)},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(137),St=Rt(138),Pt=Rt(59),xe=Rt(139);L.exports=function(L,N){return Ct(L)||St(L,N)||Pt(L,N)||xe()},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(146),St=Rt(160)((function(L,N){return null==L?{}:Ct(L,N)}));L.exports=St},function(N,Rt,Ct){var St=Ct(2),Pt=Ct(40),xe=Ct(165),_e=Ct(166);function u(Rt){var Ct="function"==typeof Map?new Map:void 0;return N.exports=u=function(N){if(null===N||!xe(N))return N;if("function"!=typeof N)throw new TypeError("Super expression must either be null or a function");if(void 0!==Ct){if(Ct.has(N))return Ct.get(N);Ct.set(N,e)}function e(){return _e(N,arguments,St(this||L).constructor)}return e.prototype=Object.create(N.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Pt(e,N)},N.exports.__esModule=!0,N.exports.default=N.exports,u(Rt)}N.exports=u,N.exports.__esModule=!0,N.exports.default=N.exports},function(L,N,Rt){var Ct=Rt(21),St={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(L,N){var Rt=L.data,Pt=N.data,xe=L.size.x,_e=L.size.y,be=Ct.a.create(L,N);return{rasterize:function(L){var N,Ct,we,Oe,Re,Me,Ce,Te,Le,Ne,Fe,Be,We=[],qe=0;for(Be=0;Be<400;Be++)We[Be]=0;for(We[0]=Rt[0],Le=null,Me=1;Me<_e-1;Me++)for(Oe=0,Ct=We[0],Re=1;Re<xe-1;Re++)if(0===Pt[Fe=Me*xe+Re])if((N=Rt[Fe])!==Ct){if(0===Oe)We[we=qe+1]=N,Ct=N,null!==(Ce=be.contourTracing(Me,Re,we,N,St.DIR.OUTSIDE_EDGE))&&(qe++,Oe=we,(Te=St.createContour2D()).dir=St.CONTOUR_DIR.CW_DIR,Te.index=Oe,Te.firstVertex=Ce,Te.nextpeer=Le,Te.insideContours=null,null!==Le&&(Le.prevpeer=Te),Le=Te);else if(null!==(Ce=be.contourTracing(Me,Re,St.DIR.INSIDE_EDGE,N,Oe))){for((Te=St.createContour2D()).firstVertex=Ce,Te.insideContours=null,Te.dir=0===L?St.CONTOUR_DIR.CCW_DIR:St.CONTOUR_DIR.CW_DIR,Te.index=L,Ne=Le;null!==Ne&&Ne.index!==Oe;)Ne=Ne.nextpeer;null!==Ne&&(Te.nextpeer=Ne.insideContours,null!==Ne.insideContours&&(Ne.insideContours.prevpeer=Te),Ne.insideContours=Te)}}else Pt[Fe]=Oe;else Pt[Fe]===St.DIR.OUTSIDE_EDGE||Pt[Fe]===St.DIR.INSIDE_EDGE?(Oe=0,Ct=Pt[Fe]===St.DIR.INSIDE_EDGE?Rt[Fe]:We[0]):Ct=We[Oe=Pt[Fe]];for(Ne=Le;null!==Ne;)Ne.index=L,Ne=Ne.nextpeer;return{cc:Le,count:qe}},debug:{drawContour:function(L,N){var Rt,Ct,Pt,xe=L.getContext("2d"),_e=N;for(xe.strokeStyle="red",xe.fillStyle="red",xe.lineWidth=1,Rt=null!==_e?_e.insideContours:null;null!==_e;){switch(null!==Rt?(Ct=Rt,Rt=Rt.nextpeer):(Ct=_e,Rt=null!==(_e=_e.nextpeer)?_e.insideContours:null),Ct.dir){case St.CONTOUR_DIR.CW_DIR:xe.strokeStyle="red";break;case St.CONTOUR_DIR.CCW_DIR:xe.strokeStyle="blue";break;case St.CONTOUR_DIR.UNKNOWN_DIR:xe.strokeStyle="green"}Pt=Ct.firstVertex,xe.beginPath(),xe.moveTo(Pt.x,Pt.y);do{Pt=Pt.next,xe.lineTo(Pt.x,Pt.y)}while(Pt!==Ct.firstVertex);xe.stroke()}}}}}};N.a=St},function(L,N,Rt){
/* @preserve ASM BEGIN */
/* @preserve ASM END */
N.a=function(L,N,Rt){"use asm";var Ct=new L.Uint8Array(Rt),St=N.size|0,Pt=L.Math.imul;function a(L,N){L|=0;N|=0;var Rt=0;var Pt=0;var xe=0;var _e=0;var be=0;var we=0;var Oe=0;var Re=0;for(Rt=1;(Rt|0)<(St-1|0);Rt=Rt+1|0){Re=Re+St|0;for(Pt=1;(Pt|0)<(St-1|0);Pt=Pt+1|0){_e=Re-St|0;be=Re+St|0;we=Pt-1|0;Oe=Pt+1|0;xe=(Ct[L+_e+we|0]|0)+(Ct[L+_e+Oe|0]|0)+(Ct[L+Re+Pt|0]|0)+(Ct[L+be+we|0]|0)+(Ct[L+be+Oe|0]|0)|0;if((xe|0)==(5|0)){Ct[N+Re+Pt|0]=1}else{Ct[N+Re+Pt|0]=0}}}}function u(L,N,Rt){L|=0;N|=0;Rt|=0;var xe=0;xe=Pt(St,St)|0;while((xe|0)>0){xe=xe-1|0;Ct[Rt+xe|0]=(Ct[L+xe|0]|0)-(Ct[N+xe|0]|0)|0}}function c(L,N,Rt){L|=0;N|=0;Rt|=0;var xe=0;xe=Pt(St,St)|0;while((xe|0)>0){xe=xe-1|0;Ct[Rt+xe|0]=Ct[L+xe|0]|0|(Ct[N+xe|0]|0)|0}}function s(L){L|=0;var N=0;var Rt=0;Rt=Pt(St,St)|0;while((Rt|0)>0){Rt=Rt-1|0;N=(N|0)+(Ct[L+Rt|0]|0)|0}return N|0}function f(L,N){L|=0;N|=0;var Rt=0;Rt=Pt(St,St)|0;while((Rt|0)>0){Rt=Rt-1|0;Ct[L+Rt|0]=N}}function l(L,N){L|=0;N|=0;var Rt=0;var Pt=0;var xe=0;var _e=0;var be=0;var we=0;var Oe=0;var Re=0;for(Rt=1;(Rt|0)<(St-1|0);Rt=Rt+1|0){Re=Re+St|0;for(Pt=1;(Pt|0)<(St-1|0);Pt=Pt+1|0){_e=Re-St|0;be=Re+St|0;we=Pt-1|0;Oe=Pt+1|0;xe=(Ct[L+_e+we|0]|0)+(Ct[L+_e+Oe|0]|0)+(Ct[L+Re+Pt|0]|0)+(Ct[L+be+we|0]|0)+(Ct[L+be+Oe|0]|0)|0;if((xe|0)>(0|0)){Ct[N+Re+Pt|0]=1}else{Ct[N+Re+Pt|0]=0}}}}function d(L,N){L|=0;N|=0;var Rt=0;Rt=Pt(St,St)|0;while((Rt|0)>0){Rt=Rt-1|0;Ct[N+Rt|0]=Ct[L+Rt|0]|0}}function h(L){L|=0;var N=0;var Rt=0;for(N=0;(N|0)<(St-1|0);N=N+1|0){Ct[L+N|0]=0;Ct[L+Rt|0]=0;Rt=Rt+St-1|0;Ct[L+Rt|0]=0;Rt=Rt+1|0}for(N=0;(N|0)<(St|0);N=N+1|0){Ct[L+Rt|0]=0;Rt=Rt+1|0}}function v(){var L=0;var N=0;var Rt=0;var Ct=0;var xe=0;var _e=0;N=Pt(St,St)|0;Rt=N+N|0;Ct=Rt+N|0;f(Ct,0);h(L);do{a(L,N);l(N,Rt);u(L,Rt,Rt);c(Ct,Rt,Ct);d(N,L);xe=s(L)|0;_e=(xe|0)==0|0}while(!_e)}return{skeletonize:v}}},,,,,,,function(L,N,Rt){L.exports=Rt(168)},function(L,N,Rt){var Ct=Rt(75),St=Rt(47),Pt=Rt(105),xe=Rt(107),_e=Rt(15),be=Rt(55),we=Rt(53);L.exports=function t(L,N,Rt,Oe,Re){L!==N&&Pt(N,(function(Pt,be){if(Re||(Re=new Ct),_e(Pt))xe(L,N,be,Rt,t,Oe,Re);else{var Me=Oe?Oe(we(L,be),Pt,be+"",L,N,Re):void 0;void 0===Me&&(Me=Pt),St(L,be,Me)}}),be)}},function(N,Rt,Ct){var St=Ct(24),Pt=Ct(81),xe=Ct(82),_e=Ct(83),be=Ct(84),we=Ct(85);function s(N){var Rt=(this||L).__data__=new St(N);(this||L).size=Rt.size}s.prototype.clear=Pt,s.prototype.delete=xe,s.prototype.get=_e,s.prototype.has=be,s.prototype.set=we,N.exports=s},function(N,Rt){N.exports=function(){(this||L).__data__=[],(this||L).size=0}},function(N,Rt,Ct){var St=Ct(25),Pt=Array.prototype.splice;N.exports=function(N){var Rt=(this||L).__data__,Ct=St(Rt,N);return!(Ct<0)&&(Ct==Rt.length-1?Rt.pop():Pt.call(Rt,Ct,1),--(this||L).size,!0)}},function(N,Rt,Ct){var St=Ct(25);N.exports=function(N){var Rt=(this||L).__data__,Ct=St(Rt,N);return Ct<0?void 0:Rt[Ct][1]}},function(N,Rt,Ct){var St=Ct(25);N.exports=function(N){return St((this||L).__data__,N)>-1}},function(N,Rt,Ct){var St=Ct(25);N.exports=function(N,Rt){var Ct=(this||L).__data__,Pt=St(Ct,N);return Pt<0?(++(this||L).size,Ct.push([N,Rt])):Ct[Pt][1]=Rt,this||L}},function(N,Rt,Ct){var St=Ct(24);N.exports=function(){(this||L).__data__=new St,(this||L).size=0}},function(N,Rt){N.exports=function(N){var Rt=(this||L).__data__,Ct=Rt.delete(N);return(this||L).size=Rt.size,Ct}},function(N,Rt){N.exports=function(N){return(this||L).__data__.get(N)}},function(N,Rt){N.exports=function(N){return(this||L).__data__.has(N)}},function(N,Rt,Ct){var St=Ct(24),Pt=Ct(43),xe=Ct(46);N.exports=function(N,Rt){var Ct=(this||L).__data__;if(Ct instanceof St){var _e=Ct.__data__;if(!Pt||_e.length<199)return _e.push([N,Rt]),(this||L).size=++Ct.size,this||L;Ct=(this||L).__data__=new xe(_e)}return Ct.set(N,Rt),(this||L).size=Ct.size,this||L}},function(L,N,Rt){var Ct=Rt(35),St=Rt(89),Pt=Rt(15),xe=Rt(91),_e=/^\[object .+?Constructor\]$/,be=Function.prototype,we=Object.prototype,Oe=be.toString,Re=we.hasOwnProperty,Me=RegExp("^"+Oe.call(Re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");L.exports=function(L){return!(!Pt(L)||St(L))&&(Ct(L)?Me:_e).test(xe(L))}},function(L,N,Rt){var Ct=Rt(27),St=Object.prototype,Pt=St.hasOwnProperty,xe=St.toString,_e=Ct?Ct.toStringTag:void 0;L.exports=function(L){var N=Pt.call(L,_e),Rt=L[_e];try{L[_e]=void 0;var Ct=!0}catch(L){}var St=xe.call(L);return Ct&&(N?L[_e]=Rt:delete L[_e]),St}},function(L,N){var Rt=Object.prototype.toString;L.exports=function(L){return Rt.call(L)}},function(L,N,Rt){var Ct,St=Rt(90),Pt=(Ct=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||""))?"Symbol(src)_1."+Ct:"";L.exports=function(L){return!!Pt&&Pt in L}},function(L,N,Rt){var Ct=Rt(19)["__core-js_shared__"];L.exports=Ct},function(L,N){var Rt=Function.prototype.toString;L.exports=function(L){if(null!=L){try{return Rt.call(L)}catch(L){}try{return L+""}catch(L){}}return""}},function(L,N){L.exports=function(L,N){return null==L?void 0:L[N]}},function(N,Rt,Ct){var St=Ct(94),Pt=Ct(24),xe=Ct(43);N.exports=function(){(this||L).size=0,(this||L).__data__={hash:new St,map:new(xe||Pt),string:new St}}},function(L,N,Rt){var Ct=Rt(95),St=Rt(96),Pt=Rt(97),xe=Rt(98),_e=Rt(99);function c(L){var N=-1,Rt=null==L?0:L.length;for(this.clear();++N<Rt;){var Ct=L[N];this.set(Ct[0],Ct[1])}}c.prototype.clear=Ct,c.prototype.delete=St,c.prototype.get=Pt,c.prototype.has=xe,c.prototype.set=_e,L.exports=c},function(N,Rt,Ct){var St=Ct(28);N.exports=function(){(this||L).__data__=St?St(null):{},(this||L).size=0}},function(N,Rt){N.exports=function(N){var Rt=this.has(N)&&delete(this||L).__data__[N];return(this||L).size-=Rt?1:0,Rt}},function(N,Rt,Ct){var St=Ct(28),Pt=Object.prototype.hasOwnProperty;N.exports=function(N){var Rt=(this||L).__data__;if(St){var Ct=Rt[N];return"__lodash_hash_undefined__"===Ct?void 0:Ct}return Pt.call(Rt,N)?Rt[N]:void 0}},function(N,Rt,Ct){var St=Ct(28),Pt=Object.prototype.hasOwnProperty;N.exports=function(N){var Rt=(this||L).__data__;return St?void 0!==Rt[N]:Pt.call(Rt,N)}},function(N,Rt,Ct){var St=Ct(28);N.exports=function(N,Rt){var Ct=(this||L).__data__;return(this||L).size+=this.has(N)?0:1,Ct[N]=St&&void 0===Rt?"__lodash_hash_undefined__":Rt,this||L}},function(N,Rt,Ct){var St=Ct(29);N.exports=function(N){var Rt=St(this||L,N).delete(N);return(this||L).size-=Rt?1:0,Rt}},function(L,N){L.exports=function(L){var N=typeof L;return"string"==N||"number"==N||"symbol"==N||"boolean"==N?"__proto__"!==L:null===L}},function(N,Rt,Ct){var St=Ct(29);N.exports=function(N){return St(this||L,N).get(N)}},function(N,Rt,Ct){var St=Ct(29);N.exports=function(N){return St(this||L,N).has(N)}},function(N,Rt,Ct){var St=Ct(29);N.exports=function(N,Rt){var Ct=St(this||L,N),Pt=Ct.size;return Ct.set(N,Rt),(this||L).size+=Ct.size==Pt?0:1,this||L}},function(L,N,Rt){var Ct=Rt(106)();L.exports=Ct},function(L,N){L.exports=function(L){return function(N,Rt,Ct){for(var St=-1,Pt=Object(N),xe=Ct(N),_e=xe.length;_e--;){var be=xe[L?_e:++St];if(!1===Rt(Pt[be],be,Pt))break}return N}}},function(L,N,Rt){var Ct=Rt(47),St=Rt(108),Pt=Rt(109),xe=Rt(112),_e=Rt(113),be=Rt(30),we=Rt(16),Oe=Rt(117),Re=Rt(51),Me=Rt(35),Ce=Rt(15),Te=Rt(119),Le=Rt(52),Ne=Rt(53),Fe=Rt(123);L.exports=function(L,N,Rt,Be,We,qe,Ve){var Ge=Ne(L,Rt),Xe=Ne(N,Rt),He=Ve.get(Xe);if(He)Ct(L,Rt,He);else{var Qe=qe?qe(Ge,Xe,Rt+"",L,N,Ve):void 0,Ye=void 0===Qe;if(Ye){var $e=we(Xe),Ze=!$e&&Re(Xe),Ke=!$e&&!Ze&&Le(Xe);Qe=Xe,$e||Ze||Ke?we(Ge)?Qe=Ge:Oe(Ge)?Qe=xe(Ge):Ze?(Ye=!1,Qe=St(Xe,!0)):Ke?(Ye=!1,Qe=Pt(Xe,!0)):Qe=[]:Te(Xe)||be(Xe)?(Qe=Ge,be(Ge)?Qe=Fe(Ge):Ce(Ge)&&!Me(Ge)||(Qe=_e(Xe))):Ye=!1}Ye&&(Ve.set(Xe,Qe),We(Qe,Xe,Be,qe,Ve),Ve.delete(Xe)),Ct(L,Rt,Qe)}}},function(N,Rt,Ct){(function(L){var N=Ct(19),St=Rt&&!Rt.nodeType&&Rt,Pt=St&&"object"==typeof L&&L&&!L.nodeType&&L,xe=Pt&&Pt.exports===St?N.Buffer:void 0,_e=xe?xe.allocUnsafe:void 0;L.exports=function(L,N){if(N)return L.slice();var Rt=L.length,Ct=_e?_e(Rt):new L.constructor(Rt);return L.copy(Ct),Ct}}).call(this||L,Ct(37)(N))},function(L,N,Rt){var Ct=Rt(110);L.exports=function(L,N){var Rt=N?Ct(L.buffer):L.buffer;return new L.constructor(Rt,L.byteOffset,L.length)}},function(L,N,Rt){var Ct=Rt(111);L.exports=function(L){var N=new L.constructor(L.byteLength);return new Ct(N).set(new Ct(L)),N}},function(L,N,Rt){var Ct=Rt(19).Uint8Array;L.exports=Ct},function(L,N){L.exports=function(L,N){var Rt=-1,Ct=L.length;for(N||(N=Array(Ct));++Rt<Ct;)N[Rt]=L[Rt];return N}},function(L,N,Rt){var Ct=Rt(114),St=Rt(49),Pt=Rt(50);L.exports=function(L){return"function"!=typeof L.constructor||Pt(L)?{}:Ct(St(L))}},function(L,N,Rt){var Ct=Rt(15),St=Object.create,Pt=function(){function t(){}return function(L){if(!Ct(L))return{};if(St)return St(L);t.prototype=L;var N=new t;return t.prototype=void 0,N}}();L.exports=Pt},function(L,N){L.exports=function(L,N){return function(Rt){return L(N(Rt))}}},function(L,N,Rt){var Ct=Rt(22),St=Rt(20);L.exports=function(L){return St(L)&&"[object Arguments]"==Ct(L)}},function(L,N,Rt){var Ct=Rt(38),St=Rt(20);L.exports=function(L){return St(L)&&Ct(L)}},function(L,N){L.exports=function(){return!1}},function(L,N,Rt){var Ct=Rt(22),St=Rt(49),Pt=Rt(20),xe=Function.prototype,_e=Object.prototype,be=xe.toString,we=_e.hasOwnProperty,Oe=be.call(Object);L.exports=function(L){if(!Pt(L)||"[object Object]"!=Ct(L))return!1;var N=St(L);if(null===N)return!0;var Rt=we.call(N,"constructor")&&N.constructor;return"function"==typeof Rt&&Rt instanceof Rt&&be.call(Rt)==Oe}},function(L,N,Rt){var Ct=Rt(22),St=Rt(39),Pt=Rt(20),xe={};xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe["[object Arguments]"]=xe["[object Array]"]=xe["[object ArrayBuffer]"]=xe["[object Boolean]"]=xe["[object DataView]"]=xe["[object Date]"]=xe["[object Error]"]=xe["[object Function]"]=xe["[object Map]"]=xe["[object Number]"]=xe["[object Object]"]=xe["[object RegExp]"]=xe["[object Set]"]=xe["[object String]"]=xe["[object WeakMap]"]=!1,L.exports=function(L){return Pt(L)&&St(L.length)&&!!xe[Ct(L)]}},function(L,N){L.exports=function(L){return function(N){return L(N)}}},function(N,Rt,Ct){(function(L){var N=Ct(44),St=Rt&&!Rt.nodeType&&Rt,Pt=St&&"object"==typeof L&&L&&!L.nodeType&&L,xe=Pt&&Pt.exports===St&&N.process,_e=function(){try{var L=Pt&&Pt.require&&Pt.require("util").types;return L||xe&&xe.binding&&xe.binding("util")}catch(L){}}();L.exports=_e}).call(this||L,Ct(37)(N))},function(L,N,Rt){var Ct=Rt(124),St=Rt(55);L.exports=function(L){return Ct(L,St(L))}},function(L,N,Rt){var Ct=Rt(54),St=Rt(36);L.exports=function(L,N,Rt,Pt){var xe=!Rt;Rt||(Rt={});for(var _e=-1,be=N.length;++_e<be;){var we=N[_e],Oe=Pt?Pt(Rt[we],L[we],we,Rt,L):void 0;void 0===Oe&&(Oe=L[we]),xe?St(Rt,we,Oe):Ct(Rt,we,Oe)}return Rt}},function(L,N,Rt){var Ct=Rt(126),St=Rt(30),Pt=Rt(16),xe=Rt(51),_e=Rt(31),be=Rt(52),we=Object.prototype.hasOwnProperty;L.exports=function(L,N){var Rt=Pt(L),Oe=!Rt&&St(L),Re=!Rt&&!Oe&&xe(L),Me=!Rt&&!Oe&&!Re&&be(L),Ce=Rt||Oe||Re||Me,Te=Ce?Ct(L.length,String):[],Le=Te.length;for(var Ne in L)!N&&!we.call(L,Ne)||Ce&&("length"==Ne||Re&&("offset"==Ne||"parent"==Ne)||Me&&("buffer"==Ne||"byteLength"==Ne||"byteOffset"==Ne)||_e(Ne,Le))||Te.push(Ne);return Te}},function(L,N){L.exports=function(L,N){for(var Rt=-1,Ct=Array(L);++Rt<L;)Ct[Rt]=N(Rt);return Ct}},function(L,N,Rt){var Ct=Rt(15),St=Rt(50),Pt=Rt(128),xe=Object.prototype.hasOwnProperty;L.exports=function(L){if(!Ct(L))return Pt(L);var N=St(L),Rt=[];for(var _e in L)("constructor"!=_e||!N&&xe.call(L,_e))&&Rt.push(_e);return Rt}},function(L,N){L.exports=function(L){var N=[];if(null!=L)for(var Rt in Object(L))N.push(Rt);return N}},function(L,N,Rt){var Ct=Rt(130),St=Rt(135);L.exports=function(L){return Ct((function(N,Rt){var Ct=-1,Pt=Rt.length,xe=Pt>1?Rt[Pt-1]:void 0,_e=Pt>2?Rt[2]:void 0;for(xe=L.length>3&&"function"==typeof xe?(Pt--,xe):void 0,_e&&St(Rt[0],Rt[1],_e)&&(xe=Pt<3?void 0:xe,Pt=1),N=Object(N);++Ct<Pt;){var be=Rt[Ct];be&&L(N,be,Ct,xe)}return N}))}},function(L,N,Rt){var Ct=Rt(56),St=Rt(57),Pt=Rt(58);L.exports=function(L,N){return Pt(St(L,N,Ct),L+"")}},function(L,N){L.exports=function(L,N,Rt){switch(Rt.length){case 0:return L.call(N);case 1:return L.call(N,Rt[0]);case 2:return L.call(N,Rt[0],Rt[1]);case 3:return L.call(N,Rt[0],Rt[1],Rt[2])}return L.apply(N,Rt)}},function(L,N,Rt){var Ct=Rt(133),St=Rt(48),Pt=Rt(56),xe=St?function(L,N){return St(L,"toString",{configurable:!0,enumerable:!1,value:Ct(N),writable:!0})}:Pt;L.exports=xe},function(L,N){L.exports=function(L){return function(){return L}}},function(L,N){var Rt=Date.now;L.exports=function(L){var N=0,Ct=0;return function(){var St=Rt(),Pt=16-(St-Ct);if(Ct=St,Pt>0){if(++N>=800)return arguments[0]}else N=0;return L.apply(void 0,arguments)}}},function(L,N,Rt){var Ct=Rt(26),St=Rt(38),Pt=Rt(31),xe=Rt(15);L.exports=function(L,N,Rt){if(!xe(Rt))return!1;var _e=typeof N;return!!("number"==_e?St(Rt)&&Pt(N,Rt.length):"string"==_e&&N in Rt)&&Ct(Rt[N],L)}},function(L,N){"undefined"!=typeof window&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(L){window.setTimeout(L,1e3/60)})),"function"!=typeof Math.imul&&(Math.imul=function(L,N){var Rt=65535&L,Ct=65535&N;return Rt*Ct+((L>>>16&65535)*Ct+Rt*(N>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&(Object.assign=function(L){if(null===L)throw new TypeError("Cannot convert undefined or null to object");for(var N=Object(L),Rt=1;Rt<arguments.length;Rt++){var Ct=arguments[Rt];if(null!==Ct)for(var St in Ct)Object.prototype.hasOwnProperty.call(Ct,St)&&(N[St]=Ct[St])}return N})},function(L,N){L.exports=function(L){if(Array.isArray(L))return L},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(L,N){var Rt=null==L?null:"undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(null!=Rt){var Ct,St,Pt,xe,_e=[],be=!0,we=!1;try{if(Pt=(Rt=Rt.call(L)).next,0===N){if(Object(Rt)!==Rt)return;be=!1}else for(;!(be=(Ct=Pt.call(Rt)).done)&&(_e.push(Ct.value),_e.length!==N);be=!0);}catch(L){we=!0,St=L}finally{try{if(!be&&null!=Rt.return&&(xe=Rt.return(),Object(xe)!==xe))return}finally{if(we)throw St}}return _e}},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(13).default;L.exports=function(L,N){if("object"!==Ct(L)||null===L)return L;var Rt=L[Symbol.toPrimitive];if(void 0!==Rt){var St=Rt.call(L,N||"default");if("object"!==Ct(St))return St;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===N?String:Number)(L)},L.exports.__esModule=!0,L.exports.default=L.exports},function(N,Rt,Ct){var St=Ct(13).default;function o(){N.exports=o=function(){return Ct},N.exports.__esModule=!0,N.exports.default=N.exports;var Rt,Ct={},Pt=Object.prototype,xe=Pt.hasOwnProperty,_e=Object.defineProperty||function(L,N,Rt){L[N]=Rt.value},be="function"==typeof Symbol?Symbol:{},we=be.iterator||"@@iterator",Oe=be.asyncIterator||"@@asyncIterator",Re=be.toStringTag||"@@toStringTag";function d(L,N,Rt){return Object.defineProperty(L,N,{value:Rt,enumerable:!0,configurable:!0,writable:!0}),L[N]}try{d({},"")}catch(Rt){d=function(L,N,Rt){return L[N]=Rt}}function h(L,N,Rt,Ct){var St=N&&N.prototype instanceof m?N:m,Pt=Object.create(St.prototype),xe=new T(Ct||[]);return _e(Pt,"_invoke",{value:A(L,Rt,xe)}),Pt}function v(L,N,Rt){try{return{type:"normal",arg:L.call(N,Rt)}}catch(L){return{type:"throw",arg:L}}}Ct.wrap=h;var Me="suspendedStart",Ce="executing",Te="completed",Le={};function m(){}function _(){}function b(){}var Ne={};d(Ne,we,(function(){return this||L}));var Fe=Object.getPrototypeOf,Be=Fe&&Fe(Fe(D([])));Be&&Be!==Pt&&xe.call(Be,we)&&(Ne=Be);var We=b.prototype=m.prototype=Object.create(Ne);function C(L){["next","throw","return"].forEach((function(N){d(L,N,(function(L){return this._invoke(N,L)}))}))}function E(N,Rt){function n(L,Ct,Pt,_e){var be=v(N[L],N,Ct);if("throw"!==be.type){var we=be.arg,Oe=we.value;return Oe&&"object"==St(Oe)&&xe.call(Oe,"__await")?Rt.resolve(Oe.__await).then((function(L){n("next",L,Pt,_e)}),(function(L){n("throw",L,Pt,_e)})):Rt.resolve(Oe).then((function(L){we.value=L,Pt(we)}),(function(L){return n("throw",L,Pt,_e)}))}_e(be.arg)}var Ct;_e(this||L,"_invoke",{value:function(L,N){function i(){return new Rt((function(Rt,Ct){n(L,N,Rt,Ct)}))}return Ct=Ct?Ct.then(i,i):i()}})}function A(L,N,Ct){var St=Me;return function(Pt,xe){if(St===Ce)throw new Error("Generator is already running");if(St===Te){if("throw"===Pt)throw xe;return{value:Rt,done:!0}}for(Ct.method=Pt,Ct.arg=xe;;){var _e=Ct.delegate;if(_e){var be=S(_e,Ct);if(be){if(be===Le)continue;return be}}if("next"===Ct.method)Ct.sent=Ct._sent=Ct.arg;else if("throw"===Ct.method){if(St===Me)throw St=Te,Ct.arg;Ct.dispatchException(Ct.arg)}else"return"===Ct.method&&Ct.abrupt("return",Ct.arg);St=Ce;var we=v(L,N,Ct);if("normal"===we.type){if(St=Ct.done?Te:"suspendedYield",we.arg===Le)continue;return{value:we.arg,done:Ct.done}}"throw"===we.type&&(St=Te,Ct.method="throw",Ct.arg=we.arg)}}}function S(L,N){var Ct=N.method,St=L.iterator[Ct];if(St===Rt)return N.delegate=null,"throw"===Ct&&L.iterator.return&&(N.method="return",N.arg=Rt,S(L,N),"throw"===N.method)||"return"!==Ct&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+Ct+"' method")),Le;var Pt=v(St,L.iterator,N.arg);if("throw"===Pt.type)return N.method="throw",N.arg=Pt.arg,N.delegate=null,Le;var xe=Pt.arg;return xe?xe.done?(N[L.resultName]=xe.value,N.next=L.nextLoc,"return"!==N.method&&(N.method="next",N.arg=Rt),N.delegate=null,Le):xe:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,Le)}function k(N){var Rt={tryLoc:N[0]};1 in N&&(Rt.catchLoc=N[1]),2 in N&&(Rt.finallyLoc=N[2],Rt.afterLoc=N[3]),(this||L).tryEntries.push(Rt)}function P(L){var N=L.completion||{};N.type="normal",delete N.arg,L.completion=N}function T(N){(this||L).tryEntries=[{tryLoc:"root"}],N.forEach(k,this||L),this.reset(!0)}function D(L){if(L||""===L){var N=L[we];if(N)return N.call(L);if("function"==typeof L.next)return L;if(!isNaN(L.length)){var Ct=-1,Pt=function n(){for(;++Ct<L.length;)if(xe.call(L,Ct))return n.value=L[Ct],n.done=!1,n;return n.value=Rt,n.done=!0,n};return Pt.next=Pt}}throw new TypeError(St(L)+" is not iterable")}return _.prototype=b,_e(We,"constructor",{value:b,configurable:!0}),_e(b,"constructor",{value:_,configurable:!0}),_.displayName=d(b,Re,"GeneratorFunction"),Ct.isGeneratorFunction=function(L){var N="function"==typeof L&&L.constructor;return!!N&&(N===_||"GeneratorFunction"===(N.displayName||N.name))},Ct.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,b):(L.__proto__=b,d(L,Re,"GeneratorFunction")),L.prototype=Object.create(We),L},Ct.awrap=function(L){return{__await:L}},C(E.prototype),d(E.prototype,Oe,(function(){return this||L})),Ct.AsyncIterator=E,Ct.async=function(L,N,Rt,St,Pt){void 0===Pt&&(Pt=Promise);var xe=new E(h(L,N,Rt,St),Pt);return Ct.isGeneratorFunction(N)?xe:xe.next().then((function(L){return L.done?L.value:xe.next()}))},C(We),d(We,Re,"Generator"),d(We,we,(function(){return this||L})),d(We,"toString",(function(){return"[object Generator]"})),Ct.keys=function(L){var N=Object(L),Rt=[];for(var Ct in N)Rt.push(Ct);return Rt.reverse(),function t(){for(;Rt.length;){var L=Rt.pop();if(L in N)return t.value=L,t.done=!1,t}return t.done=!0,t}},Ct.values=D,T.prototype={constructor:T,reset:function(N){if((this||L).prev=0,(this||L).next=0,(this||L).sent=(this||L)._sent=Rt,(this||L).done=!1,(this||L).delegate=null,(this||L).method="next",(this||L).arg=Rt,(this||L).tryEntries.forEach(P),!N)for(var Ct in this||L)"t"===Ct.charAt(0)&&xe.call(this||L,Ct)&&!isNaN(+Ct.slice(1))&&((this||L)[Ct]=Rt)},stop:function(){(this||L).done=!0;var N=(this||L).tryEntries[0].completion;if("throw"===N.type)throw N.arg;return(this||L).rval},dispatchException:function(N){if((this||L).done)throw N;var Ct=this||L;function r(L,St){return _e.type="throw",_e.arg=N,Ct.next=L,St&&(Ct.method="next",Ct.arg=Rt),!!St}for(var St=(this||L).tryEntries.length-1;St>=0;--St){var Pt=(this||L).tryEntries[St],_e=Pt.completion;if("root"===Pt.tryLoc)return r("end");if(Pt.tryLoc<=(this||L).prev){var be=xe.call(Pt,"catchLoc"),we=xe.call(Pt,"finallyLoc");if(be&&we){if((this||L).prev<Pt.catchLoc)return r(Pt.catchLoc,!0);if((this||L).prev<Pt.finallyLoc)return r(Pt.finallyLoc)}else if(be){if((this||L).prev<Pt.catchLoc)return r(Pt.catchLoc,!0)}else{if(!we)throw new Error("try statement without catch or finally");if((this||L).prev<Pt.finallyLoc)return r(Pt.finallyLoc)}}}},abrupt:function(N,Rt){for(var Ct=(this||L).tryEntries.length-1;Ct>=0;--Ct){var St=(this||L).tryEntries[Ct];if(St.tryLoc<=(this||L).prev&&xe.call(St,"finallyLoc")&&(this||L).prev<St.finallyLoc){var Pt=St;break}}Pt&&("break"===N||"continue"===N)&&Pt.tryLoc<=Rt&&Rt<=Pt.finallyLoc&&(Pt=null);var _e=Pt?Pt.completion:{};return _e.type=N,_e.arg=Rt,Pt?((this||L).method="next",(this||L).next=Pt.finallyLoc,Le):this.complete(_e)},complete:function(N,Rt){if("throw"===N.type)throw N.arg;return"break"===N.type||"continue"===N.type?(this||L).next=N.arg:"return"===N.type?((this||L).rval=(this||L).arg=N.arg,(this||L).method="return",(this||L).next="end"):"normal"===N.type&&Rt&&((this||L).next=Rt),Le},finish:function(N){for(var Rt=(this||L).tryEntries.length-1;Rt>=0;--Rt){var Ct=(this||L).tryEntries[Rt];if(Ct.finallyLoc===N)return this.complete(Ct.completion,Ct.afterLoc),P(Ct),Le}},catch:function(N){for(var Rt=(this||L).tryEntries.length-1;Rt>=0;--Rt){var Ct=(this||L).tryEntries[Rt];if(Ct.tryLoc===N){var St=Ct.completion;if("throw"===St.type){var Pt=St.arg;P(Ct)}return Pt}}throw new Error("illegal catch attempt")},delegateYield:function(N,Ct,St){return(this||L).delegate={iterator:D(N),resultName:Ct,nextLoc:St},"next"===(this||L).method&&((this||L).arg=Rt),Le}},Ct}N.exports=o,N.exports.__esModule=!0,N.exports.default=N.exports},function(L,N,Rt){var Ct=Rt(2);L.exports=function(L,N){for(;!Object.prototype.hasOwnProperty.call(L,N)&&null!==(L=Ct(L)););return L},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(60);L.exports=function(L){if(Array.isArray(L))return Ct(L)},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(L){if("undefined"!=typeof Symbol&&null!=L[Symbol.iterator]||null!=L["@@iterator"])return Array.from(L)},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(147),St=Rt(157);L.exports=function(L,N){return Ct(L,N,(function(N,Rt){return St(L,Rt)}))}},function(L,N,Rt){var Ct=Rt(148),St=Rt(156),Pt=Rt(32);L.exports=function(L,N,Rt){for(var xe=-1,_e=N.length,be={};++xe<_e;){var we=N[xe],Oe=Ct(L,we);Rt(Oe,we)&&St(be,Pt(we,L),Oe)}return be}},function(L,N,Rt){var Ct=Rt(32),St=Rt(42);L.exports=function(L,N){for(var Rt=0,Pt=(N=Ct(N,L)).length;null!=L&&Rt<Pt;)L=L[St(N[Rt++])];return Rt&&Rt==Pt?L:void 0}},function(L,N,Rt){var Ct=Rt(16),St=Rt(41),Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xe=/^\w*$/;L.exports=function(L,N){if(Ct(L))return!1;var Rt=typeof L;return!("number"!=Rt&&"symbol"!=Rt&&"boolean"!=Rt&&null!=L&&!St(L))||xe.test(L)||!Pt.test(L)||null!=N&&L in Object(N)}},function(L,N,Rt){var Ct=Rt(151),St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/\\(\\)?/g,xe=Ct((function(L){var N=[];return 46===L.charCodeAt(0)&&N.push(""),L.replace(St,(function(L,Rt,Ct,St){N.push(Ct?St.replace(Pt,"$1"):Rt||L)})),N}));L.exports=xe},function(L,N,Rt){var Ct=Rt(152);L.exports=function(L){var N=Ct(L,(function(L){return 500===Rt.size&&Rt.clear(),L})),Rt=N.cache;return N}},function(N,Rt,Ct){var St=Ct(46);function o(N,Rt){if("function"!=typeof N||null!=Rt&&"function"!=typeof Rt)throw new TypeError("Expected a function");var n=function(){var Ct=arguments,St=Rt?Rt.apply(this||L,Ct):Ct[0],Pt=n.cache;if(Pt.has(St))return Pt.get(St);var xe=N.apply(this||L,Ct);return n.cache=Pt.set(St,xe)||Pt,xe};return n.cache=new(o.Cache||St),n}o.Cache=St,N.exports=o},function(L,N,Rt){var Ct=Rt(154);L.exports=function(L){return null==L?"":Ct(L)}},function(L,N,Rt){var Ct=Rt(27),St=Rt(155),Pt=Rt(16),xe=Rt(41),_e=Ct?Ct.prototype:void 0,be=_e?_e.toString:void 0;L.exports=function t(L){if("string"==typeof L)return L;if(Pt(L))return St(L,t)+"";if(xe(L))return be?be.call(L):"";var N=L+"";return"0"==N&&1/L==-1/0?"-0":N}},function(L,N){L.exports=function(L,N){for(var Rt=-1,Ct=null==L?0:L.length,St=Array(Ct);++Rt<Ct;)St[Rt]=N(L[Rt],Rt,L);return St}},function(L,N,Rt){var Ct=Rt(54),St=Rt(32),Pt=Rt(31),xe=Rt(15),_e=Rt(42);L.exports=function(L,N,Rt,be){if(!xe(L))return L;for(var we=-1,Oe=(N=St(N,L)).length,Re=Oe-1,Me=L;null!=Me&&++we<Oe;){var Ce=_e(N[we]),Te=Rt;if("__proto__"===Ce||"constructor"===Ce||"prototype"===Ce)return L;if(we!=Re){var Le=Me[Ce];void 0===(Te=be?be(Le,Ce,Me):void 0)&&(Te=xe(Le)?Le:Pt(N[we+1])?[]:{})}Ct(Me,Ce,Te),Me=Me[Ce]}return L}},function(L,N,Rt){var Ct=Rt(158),St=Rt(159);L.exports=function(L,N){return null!=L&&St(L,N,Ct)}},function(L,N){L.exports=function(L,N){return null!=L&&N in Object(L)}},function(L,N,Rt){var Ct=Rt(32),St=Rt(30),Pt=Rt(16),xe=Rt(31),_e=Rt(39),be=Rt(42);L.exports=function(L,N,Rt){for(var we=-1,Oe=(N=Ct(N,L)).length,Re=!1;++we<Oe;){var Me=be(N[we]);if(!(Re=null!=L&&Rt(L,Me)))break;L=L[Me]}return Re||++we!=Oe?Re:!!(Oe=null==L?0:L.length)&&_e(Oe)&&xe(Me,Oe)&&(Pt(L)||St(L))}},function(L,N,Rt){var Ct=Rt(161),St=Rt(57),Pt=Rt(58);L.exports=function(L){return Pt(St(L,void 0,Ct),L+"")}},function(L,N,Rt){var Ct=Rt(162);L.exports=function(L){return(null==L?0:L.length)?Ct(L,1):[]}},function(L,N,Rt){var Ct=Rt(163),St=Rt(164);L.exports=function t(L,N,Rt,Pt,xe){var _e=-1,be=L.length;for(Rt||(Rt=St),xe||(xe=[]);++_e<be;){var we=L[_e];N>0&&Rt(we)?N>1?t(we,N-1,Rt,Pt,xe):Ct(xe,we):Pt||(xe[xe.length]=we)}return xe}},function(L,N){L.exports=function(L,N){for(var Rt=-1,Ct=N.length,St=L.length;++Rt<Ct;)L[St+Rt]=N[Rt];return L}},function(L,N,Rt){var Ct=Rt(27),St=Rt(30),Pt=Rt(16),xe=Ct?Ct.isConcatSpreadable:void 0;L.exports=function(L){return Pt(L)||St(L)||!!(xe&&L&&L[xe])}},function(L,N){L.exports=function(L){try{return-1!==Function.toString.call(L).indexOf("[native code]")}catch(N){return"function"==typeof L}},L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N,Rt){var Ct=Rt(40),St=Rt(167);function i(N,Rt,Pt){return St()?(L.exports=i=Reflect.construct.bind(),L.exports.__esModule=!0,L.exports.default=L.exports):(L.exports=i=function(L,N,Rt){var St=[null];St.push.apply(St,N);var Pt=new(Function.bind.apply(L,St));return Rt&&Ct(Pt,Rt.prototype),Pt},L.exports.__esModule=!0,L.exports.default=L.exports),i.apply(null,arguments)}L.exports=i,L.exports.__esModule=!0,L.exports.default=L.exports},function(L,N){L.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}},L.exports.__esModule=!0,L.exports.default=L.exports},function(N,Rt,Ct){Ct.r(Rt),Ct.d(Rt,"BarcodeDecoder",(function(){return Vn})),Ct.d(Rt,"Readers",(function(){return St})),Ct.d(Rt,"CameraAccess",(function(){return Jn})),Ct.d(Rt,"ImageDebug",(function(){return Te.a})),Ct.d(Rt,"ImageWrapper",(function(){return we.a})),Ct.d(Rt,"ResultCollector",(function(){return tr}));var St={};Ct.r(St),Ct.d(St,"BarcodeReader",(function(){return tn})),Ct.d(St,"TwoOfFiveReader",(function(){return an})),Ct.d(St,"NewCodabarReader",(function(){return fn})),Ct.d(St,"Code128Reader",(function(){return ln})),Ct.d(St,"Code32Reader",(function(){return _n})),Ct.d(St,"Code39Reader",(function(){return xn})),Ct.d(St,"Code39VINReader",(function(){return On})),Ct.d(St,"Code93Reader",(function(){return Cn})),Ct.d(St,"EAN2Reader",(function(){return Dn})),Ct.d(St,"EAN5Reader",(function(){return In})),Ct.d(St,"EAN8Reader",(function(){return zn})),Ct.d(St,"EANReader",(function(){return Tn})),Ct.d(St,"I2of5Reader",(function(){return Un})),Ct.d(St,"UPCEReader",(function(){return Ln})),Ct.d(St,"UPCReader",(function(){return Nn}));var Pt=Ct(13),xe=Ct.n(Pt),_e=Ct(18),be=Ct.n(_e),we=(Ct(136),Ct(11)),Oe=Ct(12),Re=Ct.n(Oe),Me=Ct(8),Ce=Ct.n(Me),Te=Ct(17),Le=Ct(3),Ne=Ct.n(Le),Fe=Ct(4),Be=Ct.n(Fe),We=Ct(1),qe=Ct.n(We),Ve=Ct(7),Ge=Ct.n(Ve),Xe=Ct(6),He=Ct.n(Xe),Qe=Ct(2),Ye=Ct.n(Qe),$e=Ct(0),Ze=Ct.n($e),Ke=Ct(9),Je=function(L){return L[L.Forward=1]="Forward",L[L.Reverse=-1]="Reverse",L}({}),tn=function(){function t(N,Rt){Ne()(this||L,t),Ze()(this||L,"_row",[]),Ze()(this||L,"config",{}),Ze()(this||L,"supplements",[]),Ze()(this||L,"SINGLE_CODE_ERROR",0),Ze()(this||L,"FORMAT","unknown"),Ze()(this||L,"CONFIG_KEYS",{}),(this||L)._row=[],(this||L).config=N||{},Rt&&((this||L).supplements=Rt)}return Be()(t,[{key:"_nextUnset",value:function(L){for(var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Rt=N;Rt<L.length;Rt++)if(!L[Rt])return Rt;return L.length}},{key:"_matchPattern",value:function(N,Rt){for(var Ct=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(this||L).SINGLE_CODE_ERROR||1,St=0,Pt=0,xe=0,_e=0,be=0,we=0,Oe=0,Re=0;Re<N.length;Re++)xe+=N[Re],_e+=Rt[Re];if(xe<_e)return Number.MAX_VALUE;Ct*=be=xe/_e;for(var Me=0;Me<N.length;Me++){if(we=N[Me],Oe=Rt[Me]*be,(Pt=Math.abs(we-Oe)/Oe)>Ct)return Number.MAX_VALUE;St+=Pt}return St/_e}},{key:"_nextSet",value:function(L){for(var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Rt=N;Rt<L.length;Rt++)if(L[Rt])return Rt;return L.length}},{key:"_correctBars",value:function(L,N,Rt){for(var Ct=Rt.length,St=0;Ct--;)(St=L[Rt[Ct]]*(1-(1-N)/2))>1&&(L[Rt[Ct]]=St)}},{key:"decodePattern",value:function(N){(this||L)._row=N;var Rt=this.decode();return null===Rt?((this||L)._row.reverse(),(Rt=this.decode())&&(Rt.direction=Je.Reverse,Rt.start=(this||L)._row.length-Rt.start,Rt.end=(this||L)._row.length-Rt.end)):Rt.direction=Je.Forward,Rt&&(Rt.format=(this||L).FORMAT),Rt}},{key:"_matchRange",value:function(N,Rt,Ct){var St;for(St=N=N<0?0:N;St<Rt;St++)if((this||L)._row[St]!==Ct)return!1;return!0}},{key:"_fillCounters",value:function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._nextUnset((this||L)._row),Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||L)._row.length,Ct=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],St=[],Pt=0;St[Pt]=0;for(var xe=N;xe<Rt;xe++)(this||L)._row[xe]^(Ct?1:0)?St[Pt]++:(St[++Pt]=1,Ct=!Ct);return St}},{key:"_toCounters",value:function(N,Rt){var Ct=Rt.length,St=(this||L)._row.length,Pt=!(this||L)._row[N],xe=0;Ke.a.init(Rt,0);for(var _e=N;_e<St;_e++)if((this||L)._row[_e]^(Pt?1:0))Rt[xe]++;else{if(++xe===Ct)break;Rt[xe]=1,Pt=!Pt}return Rt}},{key:"decodeImage",value:function(L){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]),t}();function P(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var en=[3,1,3,1,1,1],nn=[3,1,1,1,3],rn=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],on=en.reduce((function(L,N){return L+N}),0),an=function(N){Ge()(n,N);var Rt=P(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"barSpaceRatio",[1,1]),Ze()(qe()(N),"FORMAT","2of5"),Ze()(qe()(N),"SINGLE_CODE_ERROR",.78),Ze()(qe()(N),"AVG_CODE_ERROR",.3),N}return Be()(n,[{key:"_findPattern",value:function(N,Rt){var Ct=arguments.length>2&&void 0!==arguments[2]&&arguments[2],St=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Pt=[],xe=0,_e={error:Number.MAX_VALUE,code:-1,start:0,end:0},be=0,we=0,Oe=(this||L).AVG_CODE_ERROR;Rt||(Rt=this._nextSet((this||L)._row));for(var Re=0;Re<N.length;Re++)Pt[Re]=0;for(var Me=Rt;Me<(this||L)._row.length;Me++)if((this||L)._row[Me]^(Ct?1:0))Pt[xe]++;else{if(xe===Pt.length-1){be=0;for(var Ce=0;Ce<Pt.length;Ce++)be+=Pt[Ce];if((we=this._matchPattern(Pt,N))<Oe)return _e.error=we,_e.start=Me-be,_e.end=Me,_e;if(!St)return null;for(var Te=0;Te<Pt.length-2;Te++)Pt[Te]=Pt[Te+2];Pt[Pt.length-2]=0,Pt[Pt.length-1]=0,xe--}else xe++;Pt[xe]=1,Ct=!Ct}return null}},{key:"_findStart",value:function(){for(var N=null,Rt=this._nextSet((this||L)._row),Ct=1,St=0;!N;){if(!(N=this._findPattern(en,Rt,!1,!0)))return null;if(Ct=Math.floor((N.end-N.start)/on),(St=N.start-5*Ct)>=0&&this._matchRange(St,N.start,0))return N;Rt=N.end,N=null}return N}},{key:"_verifyTrailingWhitespace",value:function(N){var Rt=N.end+(N.end-N.start)/2;return Rt<(this||L)._row.length&&this._matchRange(N.end,Rt,0)?N:null}},{key:"_findEnd",value:function(){(this||L)._row.reverse();var N=this._nextSet((this||L)._row),Rt=this._findPattern(nn,N,!1,!0);if((this||L)._row.reverse(),null===Rt)return null;var Ct=Rt.start;return Rt.start=(this||L)._row.length-Rt.end,Rt.end=(this||L)._row.length-Ct,null!==Rt?this._verifyTrailingWhitespace(Rt):null}},{key:"_verifyCounterLength",value:function(L){return L.length%10==0}},{key:"_decodeCode",value:function(N){for(var Rt=(this||L).AVG_CODE_ERROR,Ct={error:Number.MAX_VALUE,code:-1,start:0,end:0},St=0;St<rn.length;St++){var Pt=this._matchPattern(N,rn[St]);Pt<Ct.error&&(Ct.code=St,Ct.error=Pt)}return Ct.error<Rt?Ct:null}},{key:"_decodePayload",value:function(N,Rt,Ct){for(var St=0,Pt=N.length,xe=[0,0,0,0,0],_e=null;St<Pt;){for(var be=0;be<5;be++)xe[be]=N[St]*(this||L).barSpaceRatio[0],St+=2;if(!(_e=this._decodeCode(xe)))return null;Rt.push("".concat(_e.code)),Ct.push(_e)}return _e}},{key:"decode",value:function(N,Rt){var Ct=this._findStart();if(!Ct)return null;var St=this._findEnd();if(!St)return null;var Pt=this._fillCounters(Ct.end,St.start,!1);if(!this._verifyCounterLength(Pt))return null;var xe=[];xe.push(Ct);var _e=[];return this._decodePayload(Pt,_e,xe)?_e.length<5?null:(xe.push(St),{code:_e.join(""),start:Ct.start,end:St.end,startInfo:Ct,decodedCodes:xe,format:(this||L).FORMAT}):null}}]),n}(tn);function U(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var un=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],cn=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],sn=[26,41,11,14],fn=function(N){Ge()(n,N);var Rt=U(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"_counters",[]),Ze()(qe()(N),"FORMAT","codabar"),N}return Be()(n,[{key:"_computeAlternatingThreshold",value:function(N,Rt){for(var Ct=Number.MAX_VALUE,St=0,Pt=0,xe=N;xe<Rt;xe+=2)(Pt=(this||L)._counters[xe])>St&&(St=Pt),Pt<Ct&&(Ct=Pt);return(Ct+St)/2|0}},{key:"_toPattern",value:function(N){var Rt=N+7;if(Rt>(this||L)._counters.length)return-1;for(var Ct=this._computeAlternatingThreshold(N,Rt),St=this._computeAlternatingThreshold(N+1,Rt),Pt=64,xe=0,_e=0,be=0;be<7;be++)xe=0==(1&be)?Ct:St,(this||L)._counters[N+be]>xe&&(_e|=Pt),Pt>>=1;return _e}},{key:"_isStartEnd",value:function(L){for(var N=0;N<sn.length;N++)if(sn[N]===L)return!0;return!1}},{key:"_sumCounters",value:function(N,Rt){for(var Ct=0,St=N;St<Rt;St++)Ct+=(this||L)._counters[St];return Ct}},{key:"_findStart",value:function(){for(var N=this._nextUnset((this||L)._row),Rt=1;Rt<(this||L)._counters.length;Rt++){var Ct=this._toPattern(Rt);if(-1!==Ct&&this._isStartEnd(Ct))return{start:N+=this._sumCounters(0,Rt),end:N+this._sumCounters(Rt,Rt+8),startCounter:Rt,endCounter:Rt+8}}return null}},{key:"_patternToChar",value:function(L){for(var N=0;N<cn.length;N++)if(cn[N]===L)return String.fromCharCode(un[N]);return null}},{key:"_calculatePatternLength",value:function(N){for(var Rt=0,Ct=N;Ct<N+7;Ct++)Rt+=(this||L)._counters[Ct];return Rt}},{key:"_verifyWhitespace",value:function(N,Rt){return(N-1<=0||(this||L)._counters[N-1]>=this._calculatePatternLength(N)/2)&&(Rt+8>=(this||L)._counters.length||(this||L)._counters[Rt+7]>=this._calculatePatternLength(Rt)/2)}},{key:"_charToPattern",value:function(L){for(var N=L.charCodeAt(0),Rt=0;Rt<un.length;Rt++)if(un[Rt]===N)return cn[Rt];return 0}},{key:"_thresholdResultPattern",value:function(N,Rt){for(var Ct,St={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},Pt=Rt,xe=0;xe<N.length;xe++){Ct=this._charToPattern(N[xe]);for(var _e=6;_e>=0;_e--){var be=2==(1&_e)?St.bar:St.space,we=1==(1&Ct)?be.wide:be.narrow;we.size+=(this||L)._counters[Pt+_e],we.counts++,Ct>>=1}Pt+=8}return["space","bar"].forEach((function(L){var N=St[L];N.wide.min=Math.floor((N.narrow.size/N.narrow.counts+N.wide.size/N.wide.counts)/2),N.narrow.max=Math.ceil(N.wide.min),N.wide.max=Math.ceil((2*N.wide.size+1.5)/N.wide.counts)})),St}},{key:"_validateResult",value:function(N,Rt){for(var Ct,St=this._thresholdResultPattern(N,Rt),Pt=Rt,xe=0;xe<N.length;xe++){Ct=this._charToPattern(N[xe]);for(var _e=6;_e>=0;_e--){var be=0==(1&_e)?St.bar:St.space,we=1==(1&Ct)?be.wide:be.narrow,Oe=(this||L)._counters[Pt+_e];if(Oe<we.min||Oe>we.max)return!1;Ct>>=1}Pt+=8}return!0}},{key:"decode",value:function(N,Rt){if((this||L)._counters=this._fillCounters(),!(Rt=this._findStart()))return null;var Ct,St=Rt.startCounter,Pt=[];do{if((Ct=this._toPattern(St))<0)return null;var xe=this._patternToChar(Ct);if(null===xe)return null;if(Pt.push(xe),St+=8,Pt.length>1&&this._isStartEnd(Ct))break}while(St<(this||L)._counters.length);if(Pt.length-2<4||!this._isStartEnd(Ct))return null;if(!this._verifyWhitespace(Rt.startCounter,St-8))return null;if(!this._validateResult(Pt,Rt.startCounter))return null;St=St>(this||L)._counters.length?(this||L)._counters.length:St;var _e=Rt.start+this._sumCounters(Rt.startCounter,St-8);return{code:Pt.join(""),start:Rt.start,end:_e,startInfo:Rt,decodedCodes:Pt,format:(this||L).FORMAT}}}]),n}(tn);function W(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var ln=function(N){Ge()(n,N);var Rt=W(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"CODE_SHIFT",98),Ze()(qe()(N),"CODE_C",99),Ze()(qe()(N),"CODE_B",100),Ze()(qe()(N),"CODE_A",101),Ze()(qe()(N),"START_CODE_A",103),Ze()(qe()(N),"START_CODE_B",104),Ze()(qe()(N),"START_CODE_C",105),Ze()(qe()(N),"STOP_CODE",106),Ze()(qe()(N),"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),Ze()(qe()(N),"SINGLE_CODE_ERROR",.64),Ze()(qe()(N),"AVG_CODE_ERROR",.3),Ze()(qe()(N),"FORMAT","code_128"),Ze()(qe()(N),"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),N}return Be()(n,[{key:"_decodeCode",value:function(N,Rt){for(var Ct={error:Number.MAX_VALUE,code:-1,start:N,end:N,correction:{bar:1,space:1}},St=[0,0,0,0,0,0],Pt=N,xe=!(this||L)._row[Pt],_e=0,be=Pt;be<(this||L)._row.length;be++)if((this||L)._row[be]^(xe?1:0))St[_e]++;else{if(_e===St.length-1){Rt&&this._correct(St,Rt);for(var we=0;we<(this||L).CODE_PATTERN.length;we++){var Oe=this._matchPattern(St,(this||L).CODE_PATTERN[we]);Oe<Ct.error&&(Ct.code=we,Ct.error=Oe)}return Ct.end=be,-1===Ct.code||Ct.error>(this||L).AVG_CODE_ERROR?null:((this||L).CODE_PATTERN[Ct.code]&&(Ct.correction.bar=this.calculateCorrection((this||L).CODE_PATTERN[Ct.code],St,(this||L).MODULE_INDICES.bar),Ct.correction.space=this.calculateCorrection((this||L).CODE_PATTERN[Ct.code],St,(this||L).MODULE_INDICES.space)),Ct)}St[++_e]=1,xe=!xe}return null}},{key:"_correct",value:function(N,Rt){this._correctBars(N,Rt.bar,(this||L).MODULE_INDICES.bar),this._correctBars(N,Rt.space,(this||L).MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var N=[0,0,0,0,0,0],Rt=this._nextSet((this||L)._row),Ct={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},St=!1,Pt=0,xe=Rt;xe<(this||L)._row.length;xe++)if((this||L)._row[xe]^(St?1:0))N[Pt]++;else{if(Pt===N.length-1){for(var _e=N.reduce((function(L,N){return L+N}),0),be=(this||L).START_CODE_A;be<=(this||L).START_CODE_C;be++){var we=this._matchPattern(N,(this||L).CODE_PATTERN[be]);we<Ct.error&&(Ct.code=be,Ct.error=we)}if(Ct.error<(this||L).AVG_CODE_ERROR)return Ct.start=xe-_e,Ct.end=xe,Ct.correction.bar=this.calculateCorrection((this||L).CODE_PATTERN[Ct.code],N,(this||L).MODULE_INDICES.bar),Ct.correction.space=this.calculateCorrection((this||L).CODE_PATTERN[Ct.code],N,(this||L).MODULE_INDICES.space),Ct;for(var Oe=0;Oe<4;Oe++)N[Oe]=N[Oe+2];N[4]=0,N[5]=0,Pt--}else Pt++;N[Pt]=1,St=!St}return null}},{key:"decode",value:function(N,Rt){var Ct=this||L,St=this._findStart();if(null===St)return null;var Pt={code:St.code,start:St.start,end:St.end,correction:{bar:St.correction.bar,space:St.correction.space}},xe=[];xe.push(Pt);for(var _e=Pt.code,be=function(L){switch(L){case Ct.START_CODE_A:return Ct.CODE_A;case Ct.START_CODE_B:return Ct.CODE_B;case Ct.START_CODE_C:return Ct.CODE_C;default:return null}}(Pt.code),we=!1,Oe=!1,Re=Oe,Me=!0,Ce=0,Te=[],Le=[];!we;){if(Re=Oe,Oe=!1,null!==(Pt=this._decodeCode(Pt.end,Pt.correction)))switch(Pt.code!==(this||L).STOP_CODE&&(Me=!0),Pt.code!==(this||L).STOP_CODE&&(Te.push(Pt.code),_e+=++Ce*Pt.code),xe.push(Pt),be){case(this||L).CODE_A:if(Pt.code<64)Le.push(String.fromCharCode(32+Pt.code));else if(Pt.code<96)Le.push(String.fromCharCode(Pt.code-64));else switch(Pt.code!==(this||L).STOP_CODE&&(Me=!1),Pt.code){case(this||L).CODE_SHIFT:Oe=!0,be=(this||L).CODE_B;break;case(this||L).CODE_B:be=(this||L).CODE_B;break;case(this||L).CODE_C:be=(this||L).CODE_C;break;case(this||L).STOP_CODE:we=!0}break;case(this||L).CODE_B:if(Pt.code<96)Le.push(String.fromCharCode(32+Pt.code));else switch(Pt.code!==(this||L).STOP_CODE&&(Me=!1),Pt.code){case(this||L).CODE_SHIFT:Oe=!0,be=(this||L).CODE_A;break;case(this||L).CODE_A:be=(this||L).CODE_A;break;case(this||L).CODE_C:be=(this||L).CODE_C;break;case(this||L).STOP_CODE:we=!0}break;case(this||L).CODE_C:if(Pt.code<100)Le.push(Pt.code<10?"0"+Pt.code:Pt.code);else switch(Pt.code!==(this||L).STOP_CODE&&(Me=!1),Pt.code){case(this||L).CODE_A:be=(this||L).CODE_A;break;case(this||L).CODE_B:be=(this||L).CODE_B;break;case(this||L).STOP_CODE:we=!0}}else we=!0;Re&&(be=be===(this||L).CODE_A?(this||L).CODE_B:(this||L).CODE_A)}return null===Pt?null:(Pt.end=this._nextUnset((this||L)._row,Pt.end),this._verifyTrailingWhitespace(Pt)?(_e-=Ce*Te[Te.length-1])%103!==Te[Te.length-1]?null:Le.length?(Me&&Le.splice(Le.length-1,1),{code:Le.join(""),start:St.start,end:Pt.end,codeset:be,startInfo:St,decodedCodes:xe,endInfo:Pt,format:(this||L).FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(N){var Rt;return(Rt=N.end+(N.end-N.start)/2)<(this||L)._row.length&&this._matchRange(N.end,Rt,0)?N:null}},{key:"calculateCorrection",value:function(L,N,Rt){for(var Ct=Rt.length,St=0,Pt=0;Ct--;)Pt+=L[Rt[Ct]],St+=N[Rt[Ct]];return Pt/St}}]),n}(tn),dn=Ct(14),hn=Ct.n(dn),vn=Ct(33),pn=Ct.n(vn);function Q(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var yn=new Uint16Array(pn()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map((function(L){return L.charCodeAt(0)}))),gn=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),xn=function(N){Ge()(n,N);var Rt=Q(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","code_39"),N}return Be()(n,[{key:"_findStart",value:function(){for(var N=this._nextSet((this||L)._row),Rt=N,Ct=new Uint16Array([0,0,0,0,0,0,0,0,0]),St=0,Pt=!1,xe=N;xe<(this||L)._row.length;xe++)if((this||L)._row[xe]^(Pt?1:0))Ct[St]++;else{if(St===Ct.length-1){if(148===this._toPattern(Ct)){var _e=Math.floor(Math.max(0,Rt-(xe-Rt)/4));if(this._matchRange(_e,Rt,0))return{start:Rt,end:xe}}Rt+=Ct[0]+Ct[1];for(var be=0;be<7;be++)Ct[be]=Ct[be+2];Ct[7]=0,Ct[8]=0,St--}else St++;Ct[St]=1,Pt=!Pt}return null}},{key:"_toPattern",value:function(L){for(var N=L.length,Rt=0,Ct=N,St=0;Ct>3;){Rt=this._findNextWidth(L,Rt),Ct=0;for(var Pt=0,xe=0;xe<N;xe++)L[xe]>Rt&&(Pt|=1<<N-1-xe,Ct++,St+=L[xe]);if(3===Ct){for(var _e=0;_e<N&&Ct>0;_e++)if(L[_e]>Rt&&(Ct--,2*L[_e]>=St))return-1;return Pt}}return-1}},{key:"_findNextWidth",value:function(L,N){for(var Rt=Number.MAX_VALUE,Ct=0;Ct<L.length;Ct++)L[Ct]<Rt&&L[Ct]>N&&(Rt=L[Ct]);return Rt}},{key:"_patternToChar",value:function(L){for(var N=0;N<gn.length;N++)if(gn[N]===L)return String.fromCharCode(yn[N]);return null}},{key:"_verifyTrailingWhitespace",value:function(L,N,Rt){var Ct=Ke.a.sum(Rt);return 3*(N-L-Ct)>=Ct}},{key:"decode",value:function(){var N=new Uint16Array([0,0,0,0,0,0,0,0,0]),Rt=[],Ct=this._findStart();if(!Ct)return null;var St,Pt,xe=this._nextSet((this||L)._row,Ct.end);do{N=this._toCounters(xe,N);var _e=this._toPattern(N);if(_e<0)return null;if(null===(St=this._patternToChar(_e)))return null;Rt.push(St),Pt=xe,xe+=Ke.a.sum(N),xe=this._nextSet((this||L)._row,xe)}while("*"!==St);return Rt.pop(),Rt.length&&this._verifyTrailingWhitespace(Pt,xe,N)?{code:Rt.join(""),start:Ct.start,end:xe,startInfo:Ct,decodedCodes:Rt,format:(this||L).FORMAT}:null}}]),n}(tn);function K(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var mn=/[AEIO]/g,_n=function(N){Ge()(n,N);var Rt=K(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","code_32_reader"),N}return Be()(n,[{key:"_decodeCode32",value:function(L){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(L))return null;for(var N=0,Rt=0;Rt<L.length;Rt++)N=32*N+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(L[Rt]);var Ct="".concat(N);return Ct.length<9&&(Ct=("000000000"+Ct).slice(-9)),"A"+Ct}},{key:"_checkChecksum",value:function(L){return!!L}},{key:"decode",value:function(){var N=hn()(Ye()(n.prototype),"decode",this||L).call(this||L);if(!N)return null;var Rt=N.code;if(!Rt)return null;if(Rt=Rt.replace(mn,""),!this._checkChecksum(Rt))return null;var Ct=this._decodeCode32(Rt);return Ct?(N.code=Ct,N):null}}]),n}(xn);function et(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var bn=/[IOQ]/g,wn=/[A-Z0-9]{17}/,On=function(N){Ge()(n,N);var Rt=et(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","code_39_vin"),N}return Be()(n,[{key:"_checkChecksum",value:function(L){return!!L}},{key:"decode",value:function(){var N=hn()(Ye()(n.prototype),"decode",this||L).call(this||L);if(!N)return null;var Rt=N.code;return Rt&&(Rt=Rt.replace(bn,"")).match(wn)&&this._checkChecksum(Rt)?(N.code=Rt,N):null}}]),n}(xn);function it(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var Rn=new Uint16Array(pn()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map((function(L){return L.charCodeAt(0)}))),Mn=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Cn=function(N){Ge()(n,N);var Rt=it(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","code_93"),N}return Be()(n,[{key:"_patternToChar",value:function(L){for(var N=0;N<Mn.length;N++)if(Mn[N]===L)return String.fromCharCode(Rn[N]);return null}},{key:"_toPattern",value:function(L){for(var N=L.length,Rt=L.reduce((function(L,N){return L+N}),0),Ct=0,St=0;St<N;St++){var Pt=Math.round(9*L[St]/Rt);if(Pt<1||Pt>4)return-1;if(0==(1&St))for(var xe=0;xe<Pt;xe++)Ct=Ct<<1|1;else Ct<<=Pt}return Ct}},{key:"_findStart",value:function(){for(var N=this._nextSet((this||L)._row),Rt=N,Ct=new Uint16Array([0,0,0,0,0,0]),St=0,Pt=!1,xe=N;xe<(this||L)._row.length;xe++)if((this||L)._row[xe]^(Pt?1:0))Ct[St]++;else{if(St===Ct.length-1){if(350===this._toPattern(Ct)){var _e=Math.floor(Math.max(0,Rt-(xe-Rt)/4));if(this._matchRange(_e,Rt,0))return{start:Rt,end:xe}}Rt+=Ct[0]+Ct[1];for(var be=0;be<4;be++)Ct[be]=Ct[be+2];Ct[4]=0,Ct[5]=0,St--}else St++;Ct[St]=1,Pt=!Pt}return null}},{key:"_verifyEnd",value:function(N,Rt){return!(N===Rt||!(this||L)._row[Rt])}},{key:"_decodeExtended",value:function(L){for(var N=L.length,Rt=[],Ct=0;Ct<N;Ct++){var St=L[Ct];if(St>="a"&&St<="d"){if(Ct>N-2)return null;var Pt=L[++Ct],xe=Pt.charCodeAt(0),_e=void 0;switch(St){case"a":if(!(Pt>="A"&&Pt<="Z"))return null;_e=String.fromCharCode(xe-64);break;case"b":if(Pt>="A"&&Pt<="E")_e=String.fromCharCode(xe-38);else if(Pt>="F"&&Pt<="J")_e=String.fromCharCode(xe-11);else if(Pt>="K"&&Pt<="O")_e=String.fromCharCode(xe+16);else if(Pt>="P"&&Pt<="S")_e=String.fromCharCode(xe+43);else{if(!(Pt>="T"&&Pt<="Z"))return null;_e=String.fromCharCode(127)}break;case"c":if(Pt>="A"&&Pt<="O")_e=String.fromCharCode(xe-32);else{if("Z"!==Pt)return null;_e=":"}break;case"d":if(!(Pt>="A"&&Pt<="Z"))return null;_e=String.fromCharCode(xe+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",_e),null}Rt.push(_e)}else Rt.push(St)}return Rt}},{key:"_matchCheckChar",value:function(L,N,Rt){var Ct=L.slice(0,N),St=Ct.length,Pt=Ct.reduce((function(L,N,Ct){return L+((-1*Ct+(St-1))%Rt+1)*Rn.indexOf(N.charCodeAt(0))}),0);return Rn[Pt%47]===L[N].charCodeAt(0)}},{key:"_verifyChecksums",value:function(L){return this._matchCheckChar(L,L.length-2,20)&&this._matchCheckChar(L,L.length-1,15)}},{key:"decode",value:function(N,Rt){if(!(Rt=this._findStart()))return null;var Ct,St,Pt=new Uint16Array([0,0,0,0,0,0]),xe=[],_e=this._nextSet((this||L)._row,Rt.end);do{Pt=this._toCounters(_e,Pt);var be=this._toPattern(Pt);if(be<0)return null;if(null===(St=this._patternToChar(be)))return null;xe.push(St),Ct=_e,_e+=Ke.a.sum(Pt),_e=this._nextSet((this||L)._row,_e)}while("*"!==St);return xe.pop(),xe.length&&this._verifyEnd(Ct,_e)&&this._verifyChecksums(xe)?(xe=xe.slice(0,xe.length-2),null===(xe=this._decodeExtended(xe))?null:{code:xe.join(""),start:Rt.start,end:_e,startInfo:Rt,decodedCodes:xe,format:(this||L).FORMAT}):null}}]),n}(tn);function st(L,N){var Rt=Object.keys(L);if(Object.getOwnPropertySymbols){var Ct=Object.getOwnPropertySymbols(L);N&&(Ct=Ct.filter((function(N){return Object.getOwnPropertyDescriptor(L,N).enumerable}))),Rt.push.apply(Rt,Ct)}return Rt}function ft(L){for(var N=1;N<arguments.length;N++){var Rt=null!=arguments[N]?arguments[N]:{};N%2?st(Object(Rt),!0).forEach((function(N){Ze()(L,N,Rt[N])})):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(Rt)):st(Object(Rt)).forEach((function(N){Object.defineProperty(L,N,Object.getOwnPropertyDescriptor(Rt,N))}))}return L}function lt(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var En=[1,1,1],An=[1,1,1,1,1],Sn=[1,1,2],kn=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],Pn=[0,11,13,14,19,25,28,21,22,26],Tn=function(N){Ge()(n,N);var Rt=lt(n);function n(N,Ct){var St;return Ne()(this||L,n),St=Rt.call(this||L,be()({supplements:[]},N),Ct),Ze()(qe()(St),"FORMAT","ean_13"),Ze()(qe()(St),"SINGLE_CODE_ERROR",.7),Ze()(qe()(St),"STOP_PATTERN",[1,1,1]),St}return Be()(n,[{key:"_findPattern",value:function(N,Rt,Ct,St){var Pt=new Array(N.length).fill(0),xe={error:Number.MAX_VALUE,start:0,end:0},_e=0;Rt||(Rt=this._nextSet((this||L)._row));for(var be=!1,we=Rt;we<(this||L)._row.length;we++)if((this||L)._row[we]^(Ct?1:0))Pt[_e]+=1;else{if(_e===Pt.length-1){var Oe=this._matchPattern(Pt,N);if(Oe<.48&&xe.error&&Oe<xe.error)return be=!0,xe.error=Oe,xe.start=we-Pt.reduce((function(L,N){return L+N}),0),xe.end=we,xe;if(St){for(var Re=0;Re<Pt.length-2;Re++)Pt[Re]=Pt[Re+2];Pt[Pt.length-2]=0,Pt[Pt.length-1]=0,_e--}}else _e++;Pt[_e]=1,Ct=!Ct}return be?xe:null}},{key:"_decodeCode",value:function(N,Rt){var Ct=[0,0,0,0],St=N,Pt={error:Number.MAX_VALUE,code:-1,start:N,end:N},xe=!(this||L)._row[St],_e=0;Rt||(Rt=kn.length);for(var be=St;be<(this||L)._row.length;be++)if((this||L)._row[be]^(xe?1:0))Ct[_e]++;else{if(_e===Ct.length-1){for(var we=0;we<Rt;we++){var Oe=this._matchPattern(Ct,kn[we]);Pt.end=be,Oe<Pt.error&&(Pt.code=we,Pt.error=Oe)}return Pt.error>.48?null:Pt}Ct[++_e]=1,xe=!xe}return null}},{key:"_findStart",value:function(){for(var N=this._nextSet((this||L)._row),Rt=null;!Rt;){if(!(Rt=this._findPattern(En,N,!1,!0)))return null;var Ct=Rt.start-(Rt.end-Rt.start);if(Ct>=0&&this._matchRange(Ct,Rt.start,0))return Rt;N=Rt.end,Rt=null}return null}},{key:"_calculateFirstDigit",value:function(L){for(var N=0;N<Pn.length;N++)if(L===Pn[N])return N;return null}},{key:"_decodePayload",value:function(L,N,Rt){for(var Ct=ft({},L),St=0,Pt=0;Pt<6;Pt++){if(!(Ct=this._decodeCode(Ct.end)))return null;Ct.code>=10?(Ct.code-=10,St|=1<<5-Pt):St|=0<<5-Pt,N.push(Ct.code),Rt.push(Ct)}var xe=this._calculateFirstDigit(St);if(null===xe)return null;N.unshift(xe);var _e=this._findPattern(An,Ct.end,!0,!1);if(null===_e||!_e.end)return null;Rt.push(_e);for(var be=0;be<6;be++){if(!(_e=this._decodeCode(_e.end,10)))return null;Rt.push(_e),N.push(_e.code)}return _e}},{key:"_verifyTrailingWhitespace",value:function(N){var Rt=N.end+(N.end-N.start);return Rt<(this||L)._row.length&&this._matchRange(N.end,Rt,0)?N:null}},{key:"_findEnd",value:function(N,Rt){var Ct=this._findPattern((this||L).STOP_PATTERN,N,Rt,!1);return null!==Ct?this._verifyTrailingWhitespace(Ct):null}},{key:"_checksum",value:function(L){for(var N=0,Rt=L.length-2;Rt>=0;Rt-=2)N+=L[Rt];N*=3;for(var Ct=L.length-1;Ct>=0;Ct-=2)N+=L[Ct];return N%10==0}},{key:"_decodeExtensions",value:function(N){var Rt=this._nextSet((this||L)._row,N),Ct=this._findPattern(Sn,Rt,!1,!1);if(null===Ct)return null;for(var St=0;St<(this||L).supplements.length;St++)try{var Pt=(this||L).supplements[St].decode((this||L)._row,Ct.end);if(null!==Pt)return{code:Pt.code,start:Rt,startInfo:Ct,end:Pt.end,decodedCodes:Pt.decodedCodes,format:(this||L).supplements[St].FORMAT}}catch(N){console.error("* decodeExtensions error in ",(this||L).supplements[St],": ",N)}return null}},{key:"decode",value:function(N,Rt){var Ct=new Array,St=new Array,Pt={},xe=this._findStart();if(!xe)return null;var _e={start:xe.start,end:xe.end};if(St.push(_e),!(_e=this._decodePayload(_e,Ct,St)))return null;if(!(_e=this._findEnd(_e.end,!1)))return null;if(St.push(_e),!this._checksum(Ct))return null;if((this||L).supplements.length>0){var be=this._decodeExtensions(_e.end);if(!be)return null;if(!be.decodedCodes)return null;var we=be.decodedCodes[be.decodedCodes.length-1],Oe={start:we.start+((we.end-we.start)/2|0),end:we.end};if(!this._verifyTrailingWhitespace(Oe))return null;Pt={supplement:be,code:Ct.join("")+be.code}}return ft(ft({code:Ct.join(""),start:xe.start,end:_e.end,startInfo:xe,decodedCodes:St},Pt),{},{format:(this||L).FORMAT})}}]),n}(tn);function xt(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var Dn=function(N){Ge()(n,N);var Rt=xt(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","ean_2"),N}return Be()(n,[{key:"decode",value:function(N,Rt){N&&((this||L)._row=N);var Ct=0,St=Rt,Pt=(this||L)._row.length,xe=[],_e=[],be=null;if(void 0===St)return null;for(var we=0;we<2&&St<Pt;we++){if(!(be=this._decodeCode(St)))return null;_e.push(be),xe.push(be.code%10),be.code>=10&&(Ct|=1<<1-we),1!==we&&(St=this._nextSet((this||L)._row,be.end),St=this._nextUnset((this||L)._row,St))}if(2!==xe.length||parseInt(xe.join(""))%4!==Ct)return null;var Oe=this._findStart();return{code:xe.join(""),decodedCodes:_e,end:be.end,format:(this||L).FORMAT,startInfo:Oe,start:Oe.start}}}]),n}(Tn);function _t(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var jn=[24,20,18,17,12,6,3,10,9,5];var In=function(N){Ge()(n,N);var Rt=_t(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","ean_5"),N}return Be()(n,[{key:"decode",value:function(N,Rt){if(void 0===Rt)return null;N&&((this||L)._row=N);for(var Ct=0,St=Rt,Pt=(this||L)._row.length,xe=null,_e=[],be=[],we=0;we<5&&St<Pt;we++){if(!(xe=this._decodeCode(St)))return null;be.push(xe),_e.push(xe.code%10),xe.code>=10&&(Ct|=1<<4-we),4!==we&&(St=this._nextSet((this||L)._row,xe.end),St=this._nextUnset((this||L)._row,St))}if(5!==_e.length)return null;if(function(L){for(var N=L.length,Rt=0,Ct=N-2;Ct>=0;Ct-=2)Rt+=L[Ct];Rt*=3;for(var St=N-1;St>=0;St-=2)Rt+=L[St];return(Rt*=3)%10}(_e)!==function(L){for(var N=0;N<10;N++)if(L===jn[N])return N;return null}(Ct))return null;var Oe=this._findStart();return{code:_e.join(""),decodedCodes:be,end:xe.end,format:(this||L).FORMAT,startInfo:Oe,start:Oe.start}}}]),n}(Tn);function Ot(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var zn=function(N){Ge()(n,N);var Rt=Ot(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","ean_8"),N}return Be()(n,[{key:"_decodePayload",value:function(L,N,Rt){for(var Ct=L,St=0;St<4;St++){if(!(Ct=this._decodeCode(Ct.end,10)))return null;N.push(Ct.code),Rt.push(Ct)}if(null===(Ct=this._findPattern(An,Ct.end,!0,!1)))return null;Rt.push(Ct);for(var Pt=0;Pt<4;Pt++){if(!(Ct=this._decodeCode(Ct.end,10)))return null;Rt.push(Ct),N.push(Ct.code)}return Ct}}]),n}(Tn);function Mt(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var Un=function(N){Ge()(n,N);var Rt=Mt(n);function n(N){var Ct;return Ne()(this||L,n),Ct=Rt.call(this||L,be()({normalizeBarSpaceWidth:!1},N)),Ze()(qe()(Ct),"barSpaceRatio",[1,1]),Ze()(qe()(Ct),"SINGLE_CODE_ERROR",.78),Ze()(qe()(Ct),"AVG_CODE_ERROR",.38),Ze()(qe()(Ct),"START_PATTERN",[1,1,1,1]),Ze()(qe()(Ct),"STOP_PATTERN",[1,1,3]),Ze()(qe()(Ct),"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),Ze()(qe()(Ct),"MAX_CORRECTION_FACTOR",5),Ze()(qe()(Ct),"FORMAT","i2of5"),N.normalizeBarSpaceWidth&&(Ct.SINGLE_CODE_ERROR=.38,Ct.AVG_CODE_ERROR=.09),Ct.config=N,He()(Ct,qe()(Ct))}return Be()(n,[{key:"_matchPattern",value:function(N,Rt){if((this||L).config.normalizeBarSpaceWidth){for(var Ct=[0,0],St=[0,0],Pt=[0,0],xe=(this||L).MAX_CORRECTION_FACTOR,_e=1/xe,be=0;be<N.length;be++)Ct[be%2]+=N[be],St[be%2]+=Rt[be];Pt[0]=St[0]/Ct[0],Pt[1]=St[1]/Ct[1],Pt[0]=Math.max(Math.min(Pt[0],xe),_e),Pt[1]=Math.max(Math.min(Pt[1],xe),_e),(this||L).barSpaceRatio=Pt;for(var we=0;we<N.length;we++)N[we]*=(this||L).barSpaceRatio[we%2]}return hn()(Ye()(n.prototype),"_matchPattern",this||L).call(this||L,N,Rt)}},{key:"_findPattern",value:function(N,Rt){var Ct=arguments.length>2&&void 0!==arguments[2]&&arguments[2],St=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Pt=new Array(N.length).fill(0),xe=0,_e={error:Number.MAX_VALUE,start:0,end:0},be=(this||L).AVG_CODE_ERROR;Ct=Ct||!1,St=St||!1,Rt||(Rt=this._nextSet((this||L)._row));for(var we=Rt;we<(this||L)._row.length;we++)if((this||L)._row[we]^(Ct?1:0))Pt[xe]++;else{if(xe===Pt.length-1){var Oe=Pt.reduce((function(L,N){return L+N}),0),Re=this._matchPattern(Pt,N);if(Re<be)return _e.error=Re,_e.start=we-Oe,_e.end=we,_e;if(!St)return null;for(var Me=0;Me<Pt.length-2;Me++)Pt[Me]=Pt[Me+2];Pt[Pt.length-2]=0,Pt[Pt.length-1]=0,xe--}else xe++;Pt[xe]=1,Ct=!Ct}return null}},{key:"_findStart",value:function(){for(var N=0,Rt=this._nextSet((this||L)._row),Ct=null,St=1;!Ct;){if(!(Ct=this._findPattern((this||L).START_PATTERN,Rt,!1,!0)))return null;if(St=Math.floor((Ct.end-Ct.start)/4),(N=Ct.start-10*St)>=0&&this._matchRange(N,Ct.start,0))return Ct;Rt=Ct.end,Ct=null}return null}},{key:"_verifyTrailingWhitespace",value:function(N){var Rt=N.end+(N.end-N.start)/2;return Rt<(this||L)._row.length&&this._matchRange(N.end,Rt,0)?N:null}},{key:"_findEnd",value:function(){(this||L)._row.reverse();var N=this._findPattern((this||L).STOP_PATTERN);if((this||L)._row.reverse(),null===N)return null;var Rt=N.start;return N.start=(this||L)._row.length-N.end,N.end=(this||L)._row.length-Rt,null!==N?this._verifyTrailingWhitespace(N):null}},{key:"_decodePair",value:function(L){for(var N=[],Rt=0;Rt<L.length;Rt++){var Ct=this._decodeCode(L[Rt]);if(!Ct)return null;N.push(Ct)}return N}},{key:"_decodeCode",value:function(N){for(var Rt=(this||L).AVG_CODE_ERROR,Ct={error:Number.MAX_VALUE,code:-1,start:0,end:0},St=0;St<(this||L).CODE_PATTERN.length;St++){var Pt=this._matchPattern(N,(this||L).CODE_PATTERN[St]);Pt<Ct.error&&(Ct.code=St,Ct.error=Pt)}return Ct.error<Rt?Ct:null}},{key:"_decodePayload",value:function(N,Rt,Ct){for(var St=0,Pt=N.length,xe=[[0,0,0,0,0],[0,0,0,0,0]],_e=null;St<Pt;){for(var be=0;be<5;be++)xe[0][be]=N[St]*(this||L).barSpaceRatio[0],xe[1][be]=N[St+1]*(this||L).barSpaceRatio[1],St+=2;if(!(_e=this._decodePair(xe)))return null;for(var we=0;we<_e.length;we++)Rt.push(_e[we].code+""),Ct.push(_e[we])}return _e}},{key:"_verifyCounterLength",value:function(L){return L.length%10==0}},{key:"decode",value:function(N,Rt){var Ct=new Array,St=new Array,Pt=this._findStart();if(!Pt)return null;St.push(Pt);var xe=this._findEnd();if(!xe)return null;var _e=this._fillCounters(Pt.end,xe.start,!1);return this._verifyCounterLength(_e)&&this._decodePayload(_e,Ct,St)?Ct.length%2!=0||Ct.length<6?null:(St.push(xe),{code:Ct.join(""),start:Pt.start,end:xe.end,startInfo:Pt,decodedCodes:St,format:(this||L).FORMAT}):null}}]),n}(tn);function Et(L,N){var Rt=Object.keys(L);if(Object.getOwnPropertySymbols){var Ct=Object.getOwnPropertySymbols(L);N&&(Ct=Ct.filter((function(N){return Object.getOwnPropertyDescriptor(L,N).enumerable}))),Rt.push.apply(Rt,Ct)}return Rt}function At(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var Ln=function(N){Ge()(n,N);var Rt=At(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),Ze()(qe()(N),"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),Ze()(qe()(N),"FORMAT","upc_e"),N}return Be()(n,[{key:"_decodePayload",value:function(L,N,Rt){for(var Ct=function(L){for(var N=1;N<arguments.length;N++){var Rt=null!=arguments[N]?arguments[N]:{};N%2?Et(Object(Rt),!0).forEach((function(N){Ze()(L,N,Rt[N])})):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(Rt)):Et(Object(Rt)).forEach((function(N){Object.defineProperty(L,N,Object.getOwnPropertyDescriptor(Rt,N))}))}return L}({},L),St=0,Pt=0;Pt<6;Pt++){if(!(Ct=this._decodeCode(Ct.end)))return null;Ct.code>=10&&(Ct.code=Ct.code-10,St|=1<<5-Pt),N.push(Ct.code),Rt.push(Ct)}return this._determineParity(St,N)?Ct:null}},{key:"_determineParity",value:function(N,Rt){for(var Ct=0;Ct<(this||L).CODE_FREQUENCY.length;Ct++)for(var St=0;St<(this||L).CODE_FREQUENCY[Ct].length;St++)if(N===(this||L).CODE_FREQUENCY[Ct][St])return Rt.unshift(Ct),Rt.push(St),!0;return!1}},{key:"_convertToUPCA",value:function(L){var N=[L[0]],Rt=L[L.length-2];return(N=Rt<=2?N.concat(L.slice(1,3)).concat([Rt,0,0,0,0]).concat(L.slice(3,6)):3===Rt?N.concat(L.slice(1,4)).concat([0,0,0,0,0]).concat(L.slice(4,6)):4===Rt?N.concat(L.slice(1,5)).concat([0,0,0,0,0,L[5]]):N.concat(L.slice(1,6)).concat([0,0,0,0,Rt])).push(L[L.length-1]),N}},{key:"_checksum",value:function(N){return hn()(Ye()(n.prototype),"_checksum",this||L).call(this||L,this._convertToUPCA(N))}},{key:"_findEnd",value:function(N,Rt){return hn()(Ye()(n.prototype),"_findEnd",this||L).call(this||L,N,!0)}},{key:"_verifyTrailingWhitespace",value:function(N){var Rt=N.end+(N.end-N.start)/2;return Rt<(this||L)._row.length&&this._matchRange(N.end,Rt,0)?N:null}}]),n}(Tn);function kt(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var Nn=function(N){Ge()(n,N);var Rt=kt(n);function n(){var N;Ne()(this||L,n);for(var Ct=arguments.length,St=new Array(Ct),Pt=0;Pt<Ct;Pt++)St[Pt]=arguments[Pt];return N=Rt.call.apply(Rt,[this||L].concat(St)),Ze()(qe()(N),"FORMAT","upc_a"),N}return Be()(n,[{key:"decode",value:function(N,Rt){var Ct=Tn.prototype.decode.call(this||L);return Ct&&Ct.code&&13===Ct.code.length&&"0"===Ct.code.charAt(0)?(Ct.code=Ct.code.substring(1),Ct):null}}]),n}(Tn),Fn={},Bn={UP:1,DOWN:-1};Fn.getBarcodeLine=function(L,N,Rt){var Ct,St,Pt,xe,_e,be=0|N.x,we=0|N.y,Oe=0|Rt.x,Re=0|Rt.y,Me=Math.abs(Re-we)>Math.abs(Oe-be),Ce=[],Te=L.data,Le=L.size.x,Ne=255,Fe=0;function x(L,N){_e=Te[N*Le+L],Ne=_e<Ne?_e:Ne,Fe=_e>Fe?_e:Fe,Ce.push(_e)}Me&&(Pt=be,be=we,we=Pt,Pt=Oe,Oe=Re,Re=Pt),be>Oe&&(Pt=be,be=Oe,Oe=Pt,Pt=we,we=Re,Re=Pt);var Be=Oe-be,We=Math.abs(Re-we);Ct=Be/2|0,St=we;var qe=we<Re?1:-1;for(xe=be;xe<Oe;xe++)Me?x(St,xe):x(xe,St),(Ct-=We)<0&&(St+=qe,Ct+=Be);return{line:Ce,min:Ne,max:Fe}},Fn.toBinaryLine=function(L){var N,Rt,Ct,St,Pt,xe,_e=L.min,be=L.max,we=L.line,Oe=_e+(be-_e)/2,Re=[],Me=(be-_e)/12,Ce=-Me;for(Ct=we[0]>Oe?Bn.UP:Bn.DOWN,Re.push({pos:0,val:we[0]}),Pt=0;Pt<we.length-2;Pt++)Ct!==(St=(N=we[Pt+1]-we[Pt])+(Rt=we[Pt+2]-we[Pt+1])<Ce&&we[Pt+1]<1.5*Oe?Bn.DOWN:N+Rt>Me&&we[Pt+1]>.5*Oe?Bn.UP:Ct)&&(Re.push({pos:Pt,val:we[Pt]}),Ct=St);for(Re.push({pos:we.length,val:we[we.length-1]}),xe=Re[0].pos;xe<Re[1].pos;xe++)we[xe]=we[xe]>Oe?0:1;for(Pt=1;Pt<Re.length-1;Pt++)for(Me=Re[Pt+1].val>Re[Pt].val?Re[Pt].val+(Re[Pt+1].val-Re[Pt].val)/3*2|0:Re[Pt+1].val+(Re[Pt].val-Re[Pt+1].val)/3|0,xe=Re[Pt].pos;xe<Re[Pt+1].pos;xe++)we[xe]=we[xe]>Me?0:1;return{line:we,threshold:Me}},Fn.debug={printFrequency:function(L,N){var Rt,Ct=N.getContext("2d");for(N.width=L.length,N.height=256,Ct.beginPath(),Ct.strokeStyle="blue",Rt=0;Rt<L.length;Rt++)Ct.moveTo(Rt,255),Ct.lineTo(Rt,255-L[Rt]);Ct.stroke(),Ct.closePath()},printPattern:function(L,N){var Rt,Ct=N.getContext("2d");for(N.width=L.length,Ct.fillColor="black",Rt=0;Rt<L.length;Rt++)1===L[Rt]&&Ct.fillRect(Rt,0,1,100)}};var Wn=Fn;function It(L,N){var Rt="undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(!Rt){if(Array.isArray(L)||(Rt=function(L,N){if(L){if("string"==typeof L)return zt(L,N);var Rt=Object.prototype.toString.call(L).slice(8,-1);"Object"===Rt&&L.constructor&&(Rt=L.constructor.name);return"Map"===Rt||"Set"===Rt?Array.from(L):"Arguments"===Rt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rt)?zt(L,N):void 0}}(L))||N&&L&&"number"==typeof L.length){Rt&&(L=Rt);var Ct=0,o=function(){};return{s:o,n:function(){return Ct>=L.length?{done:!0}:{done:!1,value:L[Ct++]}},e:function(L){throw L},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var St,Pt=!0,xe=!1;return{s:function(){Rt=Rt.call(L)},n:function(){var L=Rt.next();return Pt=L.done,L},e:function(L){xe=!0,St=L},f:function(){try{Pt||null==Rt.return||Rt.return()}finally{if(xe)throw St}}}}function zt(L,N){(null==N||N>L.length)&&(N=L.length);for(var Rt=0,Ct=new Array(N);Rt<N;Rt++)Ct[Rt]=L[Rt];return Ct}var qn={code_128_reader:ln,ean_reader:Tn,ean_5_reader:In,ean_2_reader:Dn,ean_8_reader:zn,code_39_reader:xn,code_39_vin_reader:On,codabar_reader:fn,upc_reader:Nn,upc_e_reader:Ln,i2of5_reader:Un,"2of5_reader":an,code_93_reader:Cn,code_32_reader:_n},Vn={registerReader:function(L,N){qn[L]=N},create:function(N,Rt){var Ct={frequency:null,pattern:null,overlay:null},St=[];function o(){N.readers.forEach((function(L){var N,Rt={},Ct=[];"object"===xe()(L)?(N=L.format,Rt=L.config):"string"==typeof L&&(N=L),Rt.supplements&&(Ct=Rt.supplements.map((function(L){return new qn[L]})));try{var Pt=new qn[N](Rt,Ct);St.push(Pt)}catch(L){throw console.error("* Error constructing reader ",N,L),L}}))}function a(L){var N,Ct=null,Pt=Wn.getBarcodeLine(Rt,L[0],L[1]);for(Wn.toBinaryLine(Pt),N=0;N<St.length&&null===Ct;N++)Ct=St[N].decodePattern(Pt.line);return null===Ct?null:{codeResult:Ct,barcodeLine:Pt}}function u(N){return c.apply(this||L,arguments)}function c(){return(c=Re()(Ce.a.mark((function t(L){var N,Rt,Ct,Pt;return Ce.a.wrap((function(xe){for(;;)switch(xe.prev=xe.next){case 0:N=null,Rt=It(St),xe.prev=2,Rt.s();case 4:if((Ct=Rt.n()).done){xe.next=14;break}if(!(Pt=Ct.value).decodeImage){xe.next=12;break}return xe.next=9,Pt.decodeImage(L);case 9:if(!(N=xe.sent)){xe.next=12;break}return xe.abrupt("break",14);case 12:xe.next=4;break;case 14:xe.next=19;break;case 16:xe.prev=16,xe.t0=xe.catch(2),Rt.e(xe.t0);case 19:return xe.prev=19,Rt.f(),xe.finish(19);case 22:return xe.abrupt("return",N);case 23:case"end":return xe.stop()}}),t,null,[[2,16,19,22]])})))).apply(this||L,arguments)}function s(L){var N,St;Ct.overlay;var Pt=function(L){return Math.sqrt(Math.pow(Math.abs(L[1].y-L[0].y),2)+Math.pow(Math.abs(L[1].x-L[0].x),2))}(N=function(L){return[{x:(L[1][0]-L[0][0])/2+L[0][0],y:(L[1][1]-L[0][1])/2+L[0][1]},{x:(L[3][0]-L[2][0])/2+L[2][0],y:(L[3][1]-L[2][1])/2+L[2][1]}]}(L)),xe=Math.atan2(N[1].y-N[0].y,N[1].x-N[0].x);return null===(N=function(L,N,Ct){function o(Rt){var Ct=Rt*Math.sin(N),St=Rt*Math.cos(N);L[0].y-=Ct,L[0].x-=St,L[1].y+=Ct,L[1].x+=St}for(o(Ct);Ct>1&&(!Rt.inImageWithBorder(L[0])||!Rt.inImageWithBorder(L[1]));)o(-(Ct-=Math.ceil(Ct/2)));return L}(N,xe,Math.floor(.1*Pt)))?null:(null===(St=a(N))&&(St=function(L,N,Rt){var Ct,St,Pt,xe=Math.sqrt(Math.pow(L[1][0]-L[0][0],2)+Math.pow(L[1][1]-L[0][1],2)),_e=null,be=Math.sin(Rt),we=Math.cos(Rt);for(Ct=1;Ct<16&&null===_e;Ct++)Pt={y:(St=xe/16*Ct*(Ct%2==0?-1:1))*be,x:St*we},N[0].y+=Pt.x,N[0].x-=Pt.y,N[1].y+=Pt.x,N[1].x-=Pt.y,_e=a(N);return _e}(L,N,xe)),null===St?null:{codeResult:St.codeResult,line:N,angle:xe,pattern:St.barcodeLine.line,threshold:St.barcodeLine.threshold})}return o(),{decodeFromBoundingBox:function(L){return s(L)},decodeFromBoundingBoxes:function(L){var Rt,Ct,St=[],Pt=N.multiple;for(Rt=0;Rt<L.length;Rt++){var xe=L[Rt];if((Ct=s(xe)||{}).box=xe,Pt)St.push(Ct);else if(Ct.codeResult)return Ct}return{barcodes:St}},decodeFromImage:function(L){return Re()(Ce.a.mark((function e(){var N;return Ce.a.wrap((function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,u(L);case 2:return N=Rt.sent,Rt.abrupt("return",N);case 4:case"end":return Rt.stop()}}),e)})))()},registerReader:function(L,N){if(qn[L])throw new Error("cannot register existing reader",L);qn[L]=N},setReaders:function(L){N.readers=L,St.length=0,o()}}}},Gn=function(){var L={};function e(N){return L[N]||(L[N]={subscribers:[]}),L[N]}function n(L,N){L.async?setTimeout((function(){L.callback(N)}),4):L.callback(N)}function r(L,N,Rt){var Ct;if("function"==typeof N)Ct={callback:N,async:Rt};else if(!(Ct=N).callback)throw new Error("Callback was not specified on options");e(L).subscribers.push(Ct)}return{subscribe:function(L,N,Rt){return r(L,N,Rt)},publish:function(L,N){var Rt=e(L),Ct=Rt.subscribers;Ct.filter((function(L){return!!L.once})).forEach((function(L){n(L,N)})),Rt.subscribers=Ct.filter((function(L){return!L.once})),Rt.subscribers.forEach((function(L){n(L,N)}))},once:function(L,N){var Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(L,{callback:N,async:Rt,once:!0})},unsubscribe:function(N,Rt){if(N){var Ct=e(N);Ct.subscribers=Ct&&Rt?Ct.subscribers.filter((function(L){return L.callback!==Rt})):[]}else L={}}}}(),Xn=Ct(63),Hn=Ct.n(Xn),Qn=Ct(64);function qt(N){var Rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(L){return!1}}();return function(){var Ct,St=Ye()(N);if(Rt){var Pt=Ye()(this||L).constructor;Ct=Reflect.construct(St,arguments,Pt)}else Ct=St.apply(this||L,arguments);return He()(this||L,Ct)}}var Yn,$n=function(N){Ge()(n,N);var Rt=qt(n);function n(N,Ct){var St;return Ne()(this||L,n),St=Rt.call(this||L,N),Ze()(qe()(St),"code",void 0),St.code=Ct,Object.setPrototypeOf(qe()(St),n.prototype),St}return Be()(n)}(Ct.n(Qn)()(Error)),Zn="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function Xt(){try{return navigator.mediaDevices.enumerateDevices()}catch(N){var L=new $n("enumerateDevices is not defined. ".concat(Zn),-1);return Promise.reject(L)}}function Qt(L){try{return navigator.mediaDevices.getUserMedia(L)}catch(L){var N=new $n("getUserMedia is not defined. ".concat(Zn),-1);return Promise.reject(N)}}function Yt(L){return new Promise((function(N,Rt){var Ct=10;!function o(){Ct>0?L.videoWidth>10&&L.videoHeight>10?N():window.setTimeout(o,500):Rt(new $n("Unable to play video stream. Is webcam working?",-1)),Ct--}()}))}function $t(N,Rt){return Zt.apply(this||L,arguments)}function Zt(){return(Zt=Re()(Ce.a.mark((function t(L,N){var Rt;return Ce.a.wrap((function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.next=2,Qt(N);case 2:if(Rt=Ct.sent,Yn=Rt,!L){Ct.next=11;break}return L.setAttribute("autoplay","true"),L.setAttribute("muted","true"),L.setAttribute("playsinline","true"),L.srcObject=Rt,L.addEventListener("loadedmetadata",(function(){L.play().catch((function(L){console.warn("* Error while trying to play video stream:",L)}))})),Ct.abrupt("return",Yt(L));case 11:return Ct.abrupt("return",Promise.resolve());case 12:case"end":return Ct.stop()}}),t)})))).apply(this||L,arguments)}function Kt(L){var N=Hn()(L,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==L.minAspectRatio&&L.minAspectRatio>0&&(N.aspectRatio=L.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==L.facing&&(N.facingMode=L.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),N}function Jt(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=Kt(L);return N&&N.deviceId&&N.facingMode&&delete N.facingMode,Promise.resolve({audio:!1,video:N})}function te(){return(te=Re()(Ce.a.mark((function t(){var L;return Ce.a.wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Xt();case 2:return L=N.sent,N.abrupt("return",L.filter((function(L){return"videoinput"===L.kind})));case 4:case"end":return N.stop()}}),t)})))).apply(this||L,arguments)}function ee(){if(!Yn)return null;var L=Yn.getVideoTracks();return L&&null!=L&&L.length?L[0]:null}var Kn={requestedVideoElement:null,request:function(L,N){return Re()(Ce.a.mark((function n(){var Rt;return Ce.a.wrap((function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Kn.requestedVideoElement=L,Ct.next=3,Jt(N);case 3:return Rt=Ct.sent,Ct.abrupt("return",$t(L,Rt));case 5:case"end":return Ct.stop()}}),n)})))()},release:function(){var L=Yn&&Yn.getVideoTracks();return null!==Kn.requestedVideoElement&&Kn.requestedVideoElement.pause(),new Promise((function(N){setTimeout((function(){L&&L.length&&L.forEach((function(L){return L.stop()})),Yn=null,Kn.requestedVideoElement=null,N()}),0)}))},enumerateVideoDevices:function(){return te.apply(this||L,arguments)},getActiveStreamLabel:function(){var L=ee();return L?L.label:""},getActiveTrack:ee,disableTorch:function(){return Re()(Ce.a.mark((function t(){var L;return Ce.a.wrap((function(N){for(;;)switch(N.prev=N.next){case 0:if(!(L=ee())){N.next=11;break}return N.prev=2,N.next=5,L.applyConstraints({advanced:[{torch:!1}]});case 5:N.next=11;break;case 7:throw N.prev=7,N.t0=N.catch(2),N.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),N.t0;case 11:case"end":return N.stop()}}),t,null,[[2,7]])})))()},enableTorch:function(){return Re()(Ce.a.mark((function t(){var L;return Ce.a.wrap((function(N){for(;;)switch(N.prev=N.next){case 0:if(!(L=ee())){N.next=11;break}return N.prev=2,N.next=5,L.applyConstraints({advanced:[{torch:!0}]});case 5:N.next=11;break;case 7:throw N.prev=7,N.t0=N.catch(2),N.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),N.t0;case 11:case"end":return N.stop()}}),t,null,[[2,7]])})))()}},Jn=Kn;var tr={create:function(L){var N,Rt=document.createElement("canvas"),Ct=Rt.getContext("2d",{willReadFrequently:!!L.willReadFrequently}),St=[],Pt=null!==(N=L.capacity)&&void 0!==N?N:20,xe=!0===L.capture;function u(N){return!!Pt&&N&&!function(L,N){return N&&N.some((function(N){return Object.keys(N).every((function(Rt){return N[Rt]===L[Rt]}))}))}(N,L.blacklist)&&function(L,N){return"function"!=typeof N||N(L)}(N,L.filter)}return{addResult:function(L,N,_e){var be={};u(_e)&&(Pt--,be.codeResult=_e,xe&&(Rt.width=N.x,Rt.height=N.y,Te.a.drawImage(L,N,Ct),be.frame=Rt.toDataURL()),St.push(be))},getResults:function(){return St}}}},er={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},nr=Ct(5),rr=Ct(10),or=Math.PI/180;var ir={create:function(L,N){var Rt,Ct={},St=L.getConfig(),Pt=(Object(rr.h)(L.getRealWidth(),L.getRealHeight()),L.getCanvasSize()),xe=Object(rr.h)(L.getWidth(),L.getHeight()),_e=L.getTopRight(),be=_e.x,we=_e.y,Oe=null,Re=null,Me=St.willReadFrequently;return(Rt=N||document.createElement("canvas")).width=Pt.x,Rt.height=Pt.y,console.warn("*** frame_grabber_browser: willReadFrequently=",Me,"canvas=",Rt),Oe=Rt.getContext("2d",{willReadFrequently:!!Me}),Re=new Uint8Array(xe.x*xe.y),Ct.attachData=function(L){Re=L},Ct.getData=function(){return Re},Ct.grab=function(){var N,Ct=St.halfSample,_e=L.getFrame(),Me=_e,Ce=0;if(Me){if(function(L,N){L.width!==N.x&&(L.width=N.x),L.height!==N.y&&(L.height=N.y)}(Rt,Pt),"ImageStream"===St.type&&(Me=_e.img,_e.tags&&_e.tags.orientation))switch(_e.tags.orientation){case 6:Ce=90*or;break;case 8:Ce=-90*or}return 0!==Ce?(Oe.translate(Pt.x/2,Pt.y/2),Oe.rotate(Ce),Oe.drawImage(Me,-Pt.y/2,-Pt.x/2,Pt.y,Pt.x),Oe.rotate(-Ce),Oe.translate(-Pt.x/2,-Pt.y/2)):Oe.drawImage(Me,0,0,Pt.x,Pt.y),N=Oe.getImageData(be,we,xe.x,xe.y).data,Ct?Object(rr.e)(N,xe,Re):Object(rr.c)(N,Re,St),!0}return!1},Ct.getSize=function(){return xe},Ct}},ar=ir,ur={274:"orientation"},cr=Object.keys(ur).map((function(L){return ur[L]}));function he(L){return new Promise((function(N){var Rt=new FileReader;Rt.onload=function(L){return N(L.target.result)},Rt.readAsArrayBuffer(L)}))}function ve(N){return new Promise((function(Rt,Ct){var St=new XMLHttpRequest;St.open("GET",N,!0),St.responseType="blob",St.onreadystatechange=function(){St.readyState!==XMLHttpRequest.DONE||200!==St.status&&0!==St.status||Rt((this||L).response)},St.onerror=Ct,St.send()}))}function pe(L){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr,Rt=new DataView(L),Ct=L.byteLength,St=N.reduce((function(L,N){var Rt=Object.keys(ur).filter((function(L){return ur[L]===N}))[0];return Rt&&(L[Rt]=N),L}),{}),Pt=2;if(255!==Rt.getUint8(0)||216!==Rt.getUint8(1))return!1;for(;Pt<Ct;){if(255!==Rt.getUint8(Pt))return!1;if(225===Rt.getUint8(Pt+1))return ye(Rt,Pt+4,St);Pt+=2+Rt.getUint16(Pt+2)}return!1}function ye(L,N,Rt){if("Exif"!==function(L,N,Rt){for(var Ct="",St=N;St<N+Rt;St++)Ct+=String.fromCharCode(L.getUint8(St));return Ct}(L,N,4))return!1;var Ct,St=N+6;if(18761===L.getUint16(St))Ct=!1;else{if(19789!==L.getUint16(St))return!1;Ct=!0}if(42!==L.getUint16(St+2,!Ct))return!1;var Pt=L.getUint32(St+4,!Ct);return!(Pt<8)&&function(L,N,Rt,Ct,St){for(var Pt=L.getUint16(Rt,!St),xe={},_e=0;_e<Pt;_e++){var be=Rt+12*_e+2,we=Ct[L.getUint16(be,!St)];we&&(xe[we]=ge(L,be,N,Rt,St))}return xe}(L,St,St+Pt,Rt,Ct)}function ge(L,N,Rt,Ct,St){var Pt=L.getUint16(N+2,!St),xe=L.getUint32(N+4,!St);switch(Pt){case 3:if(1===xe)return L.getUint16(N+8,!St)}return null}var sr={};function me(N,Rt){N.onload=function(){Rt.loaded(this||L)}}sr.load=function(L,N,Rt,Ct,St){var Pt,xe,_e,be=new Array(Ct),we=new Array(be.length);if(!1===St)be[0]=L;else for(Pt=0;Pt<be.length;Pt++)_e=Rt+Pt,be[Pt]="".concat(L,"image-").concat("00".concat(_e).slice(-3),".jpg");for(we.notLoaded=[],we.addImage=function(L){we.notLoaded.push(L)},we.loaded=function(Rt){for(var Ct=we.notLoaded,Pt=0;Pt<Ct.length;Pt++)if(Ct[Pt]===Rt){Ct.splice(Pt,1);for(var xe=0;xe<be.length;xe++){var _e=be[xe].substr(be[xe].lastIndexOf("/"));if(-1!==Rt.src.lastIndexOf(_e)){we[xe]={img:Rt};break}}break}0===Ct.length&&(!1===St?function(L){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr;return/^blob:/i.test(L)?ve(L).then(he).then((function(L){return pe(L,N)})):Promise.resolve(null)}(L,["orientation"]).then((function(L){we[0].tags=L,N(we)})).catch((function(L){console.log(L),N(we)})):N(we))},Pt=0;Pt<be.length;Pt++)xe=new Image,we.addImage(xe),me(xe,we),xe.src=be[Pt]};var fr=sr,lr={createVideoStream:function(L){console.warn("**** InputStreamBrowser createVideoStream");var N,Rt,Ct=null,St=["canrecord","ended"],Pt={},xe={x:0,y:0,type:"Point"},_e={x:0,y:0,type:"XYSize"};var be={getRealWidth:function(){return L.videoWidth},getRealHeight:function(){return L.videoHeight},getWidth:function(){return N},getHeight:function(){return Rt},setWidth:function(L){N=L},setHeight:function(L){Rt=L},setInputStream:function(L){Ct=L,this.setAttribute("src",void 0!==L.src?L.src:"")},ended:function(){return L.ended},getConfig:function(){return Ct},setAttribute:function(N,Rt){L&&L.setAttribute(N,Rt)},pause:function(){L.pause()},play:function(){L.play()},setCurrentTime:function(L){var N;"LiveStream"!==(null===(N=Ct)||void 0===N?void 0:N.type)&&this.setAttribute("currentTime",L.toString())},addEventListener:function(N,Rt,Ct){-1!==St.indexOf(N)?(Pt[N]||(Pt[N]=[]),Pt[N].push(Rt)):L.addEventListener(N,Rt,Ct)},clearEventHandlers:function(){St.forEach((function(N){var Rt=Pt[N];Rt&&Rt.length>0&&Rt.forEach((function(Rt){L.removeEventListener(N,Rt)}))}))},trigger:function(St,xe){var we,Oe,Re,Me,Ce,Te=Pt[St];if("canrecord"===St&&(Me=L.videoWidth,Ce=L.videoHeight,N=null!==(Oe=Ct)&&void 0!==Oe&&Oe.size?Me/Ce>1?Ct.size:Math.floor(Me/Ce*Ct.size):Me,Rt=null!==(Re=Ct)&&void 0!==Re&&Re.size?Me/Ce>1?Math.floor(Ce/Me*Ct.size):Ct.size:Ce,_e.x=N,_e.y=Rt),Te&&Te.length>0)for(we=0;we<Te.length;we++)Te[we].apply(be,xe)},setTopRight:function(L){xe.x=L.x,xe.y=L.y},getTopRight:function(){return xe},setCanvasSize:function(L){_e.x=L.x,_e.y=L.y},getCanvasSize:function(){return _e},getFrame:function(){return L}};return be},createLiveStream:function(L){console.warn("**** InputStreamBrowser createLiveStream"),L&&L.setAttribute("autoplay","true");var N=lr.createVideoStream(L);return N.ended=function(){return!1},N},createImageStream:function(){var L,N,Rt=null,Ct=0,St=0,Pt=0,xe=!0,_e=!1,be=null,we=0,Oe=null,Re=!1,Me=["canrecord","ended"],Ce={},Te={x:0,y:0,type:"Point"},Le={x:0,y:0,type:"XYSize"};function y(L,N){var Rt,Ct=Ce[L];if(Ct&&Ct.length>0)for(Rt=0;Rt<Ct.length;Rt++)Ct[Rt].apply(Ne,N)}var Ne={trigger:y,getWidth:function(){return L},getHeight:function(){return N},setWidth:function(N){L=N},setHeight:function(L){N=L},getRealWidth:function(){return Ct},getRealHeight:function(){return St},setInputStream:function(xe){var Re;Rt=xe,!1===xe.sequence?(Oe=xe.src,we=1):(Oe=xe.src,we=xe.length),_e=!1,fr.load(Oe,(function(xe){var we,Oe;if(be=xe,xe[0].tags&&xe[0].tags.orientation)switch(xe[0].tags.orientation){case 6:case 8:Ct=xe[0].img.height,St=xe[0].img.width;break;default:Ct=xe[0].img.width,St=xe[0].img.height}else Ct=xe[0].img.width,St=xe[0].img.height;L=null!==(we=Rt)&&void 0!==we&&we.size?Ct/St>1?Rt.size:Math.floor(Ct/St*Rt.size):Ct,N=null!==(Oe=Rt)&&void 0!==Oe&&Oe.size?Ct/St>1?Math.floor(St/Ct*Rt.size):Rt.size:St,Le.x=L,Le.y=N,_e=!0,Pt=0,setTimeout((function(){y("canrecord",[])}),0)}),1,we,null===(Re=Rt)||void 0===Re?void 0:Re.sequence)},ended:function(){return Re},setAttribute:function(){},getConfig:function(){return Rt},pause:function(){xe=!0},play:function(){xe=!1},setCurrentTime:function(L){Pt=L},addEventListener:function(L,N){-1!==Me.indexOf(L)&&(Ce[L]||(Ce[L]=[]),Ce[L].push(N))},clearEventHandlers:function(){Object.keys(Ce).forEach((function(L){return delete Ce[L]}))},setTopRight:function(L){Te.x=L.x,Te.y=L.y},getTopRight:function(){return Te},setCanvasSize:function(L){Le.x=L.x,Le.y=L.y},getCanvasSize:function(){return Le},getFrame:function(){var L,N;if(!_e)return null;xe||(L=null===(N=be)||void 0===N?void 0:N[Pt],Pt<we-1?Pt++:setTimeout((function(){Re=!0,y("ended",[])}),0));return L}};return Ne}},dr=lr,hr=Ct(23),vr=Be()((function t(){Ne()(this||L,t),Ze()(this||L,"config",void 0),Ze()(this||L,"inputStream",void 0),Ze()(this||L,"framegrabber",void 0),Ze()(this||L,"inputImageWrapper",void 0),Ze()(this||L,"stopped",!1),Ze()(this||L,"boxSize",void 0),Ze()(this||L,"resultCollector",void 0),Ze()(this||L,"decoder",void 0),Ze()(this||L,"workerPool",[]),Ze()(this||L,"onUIThread",!0),Ze()(this||L,"canvasContainer",new yr)})),pr=Be()((function t(){Ne()(this||L,t),Ze()(this||L,"image",void 0),Ze()(this||L,"overlay",void 0)})),yr=Be()((function t(){Ne()(this||L,t),Ze()(this||L,"ctx",void 0),Ze()(this||L,"dom",void 0),(this||L).ctx=new pr,(this||L).dom=new pr}));function Ee(L){if("undefined"==typeof document)return null;if(L instanceof HTMLElement&&L.nodeName&&1===L.nodeType)return L;var N="string"==typeof L?L:"#interactive.viewport";return document.querySelector(N)}function Ae(L,N,Rt){var Ct=function(L,N){var Rt=document.querySelector(L);return Rt||((Rt=document.createElement("canvas")).className=N),Rt}(L,N);console.warn("* initCanvas getCanvasAndContext");var St=Ct.getContext("2d",{willReadFrequently:Rt.willReadFrequently});return{canvas:Ct,context:St}}function Se(L){var N,Rt,Ct,St,Pt,xe,_e=Ee(null==L||null===(N=L.config)||void 0===N||null===(Rt=N.inputStream)||void 0===Rt?void 0:Rt.target),be=null==L||null===(Ct=L.config)||void 0===Ct||null===(St=Ct.inputStream)||void 0===St?void 0:St.type;if(!be)return null;var we=function(L,N){var Rt=N.willReadFrequently;if("undefined"!=typeof document){var Ct=Ae("canvas.imgBuffer","imgBuffer",{willReadFrequently:Rt}),St=Ae("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:Rt});return Ct.canvas.width=St.canvas.width=L.x,Ct.canvas.height=St.canvas.height=L.y,{dom:{image:Ct.canvas,overlay:St.canvas},ctx:{image:Ct.context,overlay:St.context}}}return null}(L.inputStream.getCanvasSize(),{willReadFrequently:!(null==L||null===(Pt=L.config)||void 0===Pt||null===(xe=Pt.inputStream)||void 0===xe||!xe.willReadFrequently)});if(!we)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var Oe=we.dom;return"undefined"!=typeof document&&_e&&("ImageStream"!==be||_e.contains(Oe.image)||_e.appendChild(Oe.image),_e.contains(Oe.overlay)||_e.appendChild(Oe.overlay)),we}function ke(L,N){var Rt=Object.keys(L);if(Object.getOwnPropertySymbols){var Ct=Object.getOwnPropertySymbols(L);N&&(Ct=Ct.filter((function(N){return Object.getOwnPropertyDescriptor(L,N).enumerable}))),Rt.push.apply(Rt,Ct)}return Rt}function Pe(L){for(var N=1;N<arguments.length;N++){var Rt=null!=arguments[N]?arguments[N]:{};N%2?ke(Object(Rt),!0).forEach((function(N){Ze()(L,N,Rt[N])})):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(Rt)):ke(Object(Rt)).forEach((function(N){Object.defineProperty(L,N,Object.getOwnPropertyDescriptor(Rt,N))}))}return L}nr.a.setMatrixArrayType(Array);var gr=[];function De(L){return Pe(Pe({},L),{},{inputStream:Pe(Pe({},L.inputStream),{},{target:null})})}function je(L){if(L){var N=L().default;if(!N)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var Rt;function r(L){self.postMessage({event:"processed",imageData:Rt.data,result:L},[Rt.data.buffer])}function o(){self.postMessage({event:"initialized",imageData:Rt.data},[Rt.data.buffer])}self.onmessage=function(L){if("init"===L.data.cmd){var Ct=L.data.config;Ct.numOfWorkers=0,Rt=new N.ImageWrapper({x:L.data.size.x,y:L.data.size.y},new Uint8Array(L.data.imageData)),N.init(Ct,o,Rt),N.onProcessed(r)}else"process"===L.data.cmd?(Rt.data=new Uint8Array(L.data.imageData),N.start()):"setReaders"===L.data.cmd?N.setReaders(L.data.readers):"registerReader"===L.data.cmd&&N.registerReader(L.data.name,L.data.reader)}}function Ie(L,N,Rt){var Ct,St,Pt=("undefined"!=typeof __factorySource__&&(St=__factorySource__),Ct=new Blob(["("+je.toString()+")("+St+");"],{type:"text/javascript"}),window.URL.createObjectURL(Ct)),xe={worker:new Worker(Pt),imageData:new Uint8Array(N.getWidth()*N.getHeight()),busy:!0};xe.worker.onmessage=function(L){"initialized"===L.data.event?(URL.revokeObjectURL(Pt),xe.busy=!1,xe.imageData=new Uint8Array(L.data.imageData),Rt(xe)):"processed"===L.data.event?(xe.imageData=new Uint8Array(L.data.imageData),xe.busy=!1,"undefined"!=typeof publishResult&&publishResult(L.data.result,xe.imageData)):L.data.event},xe.worker.postMessage({cmd:"init",size:{x:N.getWidth(),y:N.getHeight()},imageData:xe.imageData,config:De(L)},[xe.imageData.buffer])}function ze(L,N,Rt,Ct){var St=L-gr.length;if(0===St&&Ct)Ct();else if(St<0)gr.slice(St).forEach((function(L){L.worker.terminate()})),gr=gr.slice(0,St),Ct&&Ct();else{var i=function(N){gr.push(N),gr.length>=L&&Ct&&Ct()};if(N)for(var Pt=0;Pt<St;Pt++)Ie(N,Rt,i)}}function Ue(L,N,Rt){for(var Ct=L.length;Ct--;)L[Ct][0]+=N,L[Ct][1]+=Rt}nr.a.setMatrixArrayType(Array);var xr=function(){function t(){var N=this||L;Ne()(this||L,t),Ze()(this||L,"context",new vr),Ze()(this||L,"canRecord",(function(L){var Rt;N.context.config&&(hr.a.checkImageConstraints(N.context.inputStream,null===(Rt=N.context.config)||void 0===Rt?void 0:Rt.locator),N.initCanvas(),N.context.framegrabber=ar.create(N.context.inputStream,N.context.canvasContainer.dom.image),void 0===N.context.config.numOfWorkers&&(N.context.config.numOfWorkers=0),ze(N.context.config.numOfWorkers,N.context.config,N.context.inputStream,(function(){var Rt;0===(null===(Rt=N.context.config)||void 0===Rt?void 0:Rt.numOfWorkers)&&N.initializeData(),N.ready(L)})))})),Ze()(this||L,"update",(function(){if(N.context.onUIThread){var L,Rt=(St=N.context.framegrabber,gr.length?!!(Pt=gr.filter((function(L){return!L.busy}))[0])&&(St.attachData(Pt.imageData),St.grab()&&(Pt.busy=!0,Pt.worker.postMessage({cmd:"process",imageData:Pt.imageData},[Pt.imageData.buffer])),!0):null);Rt||(N.context.framegrabber.attachData(null===(L=N.context.inputImageWrapper)||void 0===L?void 0:L.data),N.context.framegrabber.grab()&&(Rt||N.locateAndDecode()))}else{var Ct;N.context.framegrabber.attachData(null===(Ct=N.context.inputImageWrapper)||void 0===Ct?void 0:Ct.data),N.context.framegrabber.grab(),N.locateAndDecode()}var St,Pt}))}var N,Rt;return Be()(t,[{key:"initBuffers",value:function(N){if((this||L).context.config){var Rt=function(L,N,Rt){var Ct=N||new we.a({x:L.getWidth(),y:L.getHeight(),type:"XYSize"}),St=[nr.c.clone([0,0]),nr.c.clone([0,Ct.size.y]),nr.c.clone([Ct.size.x,Ct.size.y]),nr.c.clone([Ct.size.x,0])];return hr.a.init(Ct,Rt),{inputImageWrapper:Ct,boxSize:St}}((this||L).context.inputStream,N,(this||L).context.config.locator),Ct=Rt.inputImageWrapper,St=Rt.boxSize;(this||L).context.inputImageWrapper=Ct,(this||L).context.boxSize=St}}},{key:"initializeData",value:function(N){(this||L).context.config&&(this.initBuffers(N),(this||L).context.decoder=Vn.create((this||L).context.config.decoder,(this||L).context.inputImageWrapper))}},{key:"getViewPort",value:function(){return(this||L).context.config&&(this||L).context.config.inputStream?Ee((this||L).context.config.inputStream.target):null}},{key:"ready",value:function(N){(this||L).context.inputStream.play(),N()}},{key:"initCanvas",value:function(){var N=Se((this||L).context);if(N){var Rt=N.ctx,Ct=N.dom;(this||L).context.canvasContainer.dom.image=Ct.image,(this||L).context.canvasContainer.dom.overlay=Ct.overlay,(this||L).context.canvasContainer.ctx.image=Rt.image,(this||L).context.canvasContainer.ctx.overlay=Rt.overlay}}},{key:"initInputStream",value:function(N){if((this||L).context.config&&(this||L).context.config.inputStream){var Rt=(this||L).context.config.inputStream,Ct=Rt.type,St=Rt.constraints,Pt=function(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LiveStream",N=arguments.length>1?arguments[1]:void 0,Rt=arguments.length>2?arguments[2]:void 0;switch(L){case"VideoStream":var Ct=document.createElement("video");return{video:Ct,inputStream:Rt.createVideoStream(Ct)};case"ImageStream":return{inputStream:Rt.createImageStream()};case"LiveStream":var St=null;return N&&((St=N.querySelector("video"))||(St=document.createElement("video"),N.appendChild(St))),{video:St,inputStream:Rt.createLiveStream(St)};default:return console.error("* setupInputStream invalid type ".concat(L)),{video:null,inputStream:null}}}(Ct,this.getViewPort(),dr),xe=Pt.video,_e=Pt.inputStream;"LiveStream"===Ct&&xe&&Jn.request(xe,St).then((function(){return _e.trigger("canrecord")})).catch((function(L){return N(L)})),_e&&(_e.setAttribute("preload","auto"),_e.setInputStream((this||L).context.config.inputStream),_e.addEventListener("canrecord",(this||L).canRecord.bind(void 0,N))),(this||L).context.inputStream=_e}}},{key:"getBoundingBoxes",value:function(){var N;return null!==(N=(this||L).context.config)&&void 0!==N&&N.locate?hr.a.locate():[[nr.c.clone((this||L).context.boxSize[0]),nr.c.clone((this||L).context.boxSize[1]),nr.c.clone((this||L).context.boxSize[2]),nr.c.clone((this||L).context.boxSize[3])]]}},{key:"transformResult",value:function(N){var Rt=this||L,Ct=(this||L).context.inputStream.getTopRight(),St=Ct.x,Pt=Ct.y;if((0!==St||0!==Pt)&&(N.barcodes&&N.barcodes.forEach((function(L){return Rt.transformResult(L)})),N.line&&2===N.line.length&&function(L,N,Rt){L[0].x+=N,L[0].y+=Rt,L[1].x+=N,L[1].y+=Rt}(N.line,St,Pt),N.box&&Ue(N.box,St,Pt),N.boxes&&N.boxes.length>0))for(var xe=0;xe<N.boxes.length;xe++)Ue(N.boxes[xe],St,Pt)}},{key:"addResult",value:function(N,Rt){var Ct=this||L;Rt&&(this||L).context.resultCollector&&(N.barcodes?N.barcodes.filter((function(L){return L.codeResult})).forEach((function(L){return Ct.addResult(L,Rt)})):N.codeResult&&(this||L).context.resultCollector.addResult(Rt,(this||L).context.inputStream.getCanvasSize(),N.codeResult))}},{key:"hasCodeResult",value:function(L){return!(!L||!(L.barcodes?L.barcodes.some((function(L){return L.codeResult})):L.codeResult))}},{key:"publishResult",value:function(){var N,Rt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,Ct=arguments.length>1?arguments[1]:void 0,St=Rt;Rt&&(this||L).context.onUIThread&&(this.transformResult(Rt),this.addResult(Rt,Ct),St=(null==Rt||null===(N=Rt.barcodes)||void 0===N?void 0:N.length)>0?Rt.barcodes:Rt);Gn.publish("processed",St),this.hasCodeResult(Rt)&&Gn.publish("detected",St)}},{key:"locateAndDecode",value:(Rt=Re()(Ce.a.mark((function t(){var N,Rt,Ct,St,Pt;return Ce.a.wrap((function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(!(N=this.getBoundingBoxes())){xe.next=12;break}return xe.next=4,(this||L).context.decoder.decodeFromBoundingBoxes(N);case 4:if(xe.t0=xe.sent,xe.t0){xe.next=7;break}xe.t0={};case 7:(Ct=xe.t0).boxes=N,this.publishResult(Ct,null===(Rt=(this||L).context.inputImageWrapper)||void 0===Rt?void 0:Rt.data),xe.next=16;break;case 12:return xe.next=14,(this||L).context.decoder.decodeFromImage((this||L).context.inputImageWrapper);case 14:(St=xe.sent)?this.publishResult(St,null===(Pt=(this||L).context.inputImageWrapper)||void 0===Pt?void 0:Pt.data):this.publishResult();case 16:case"end":return xe.stop()}}),t,this||L)}))),function(){return Rt.apply(this||L,arguments)})},{key:"startContinuousUpdate",value:function(){var N,Rt=this||L,Ct=null,St=1e3/((null===(N=(this||L).context.config)||void 0===N?void 0:N.frequency)||60);(this||L).context.stopped=!1;var Pt=(this||L).context;!function t(L){Ct=Ct||L,Pt.stopped||(L>=Ct&&(Ct+=St,Rt.update()),window.requestAnimationFrame(t))}(performance.now())}},{key:"start",value:function(){var N,Rt;(this||L).context.onUIThread&&"LiveStream"===(null===(N=(this||L).context.config)||void 0===N||null===(Rt=N.inputStream)||void 0===Rt?void 0:Rt.type)?this.startContinuousUpdate():this.update()}},{key:"stop",value:(N=Re()(Ce.a.mark((function t(){var N;return Ce.a.wrap((function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if((this||L).context.stopped=!0,ze(0),null===(N=(this||L).context.config)||void 0===N||!N.inputStream||"LiveStream"!==(this||L).context.config.inputStream.type){Rt.next=6;break}return Rt.next=5,Jn.release();case 5:(this||L).context.inputStream.clearEventHandlers();case 6:case"end":return Rt.stop()}}),t,this||L)}))),function(){return N.apply(this||L,arguments)})},{key:"setReaders",value:function(N){(this||L).context.decoder&&(this||L).context.decoder.setReaders(N),function(L){gr.forEach((function(N){return N.worker.postMessage({cmd:"setReaders",readers:L})}))}(N)}},{key:"registerReader",value:function(N,Rt){Vn.registerReader(N,Rt),(this||L).context.decoder&&(this||L).context.decoder.registerReader(N,Rt),function(L,N){gr.forEach((function(Rt){return Rt.worker.postMessage({cmd:"registerReader",name:L,reader:N})}))}(N,Rt)}}]),t}(),mr=new xr,_r=mr.context,br={init:function(L,N,Rt){var Ct,St=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mr;return N||(Ct=new Promise((function(L,Rt){N=function(N){N?Rt(N):L()}}))),St.context.config=be()({},er,L),St.context.config.numOfWorkers>0&&(St.context.config.numOfWorkers=0),Rt?(St.context.onUIThread=!1,St.initializeData(Rt),N&&N()):St.initInputStream(N),Ct},start:function(){return mr.start()},stop:function(){return mr.stop()},pause:function(){_r.stopped=!0},onDetected:function(L){L&&("function"==typeof L||"object"===xe()(L)&&L.callback)?Gn.subscribe("detected",L):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(L){Gn.unsubscribe("detected",L)},onProcessed:function(L){L&&("function"==typeof L||"object"===xe()(L)&&L.callback)?Gn.subscribe("processed",L):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(L){Gn.unsubscribe("processed",L)},setReaders:function(L){L?mr.setReaders(L):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(L,N){L?N?mr.registerReader(L,N):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(L){L&&"function"==typeof L.addResult&&(_r.resultCollector=L)},get canvas(){return _r.canvasContainer},decodeSingle:function(N,Rt){var Ct=this||L,St=new xr;return(N=be()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:N.src},numOfWorkers:1,locator:{halfSample:!1}},N)).numOfWorkers>0&&(N.numOfWorkers=0),N.numOfWorkers>0&&("undefined"==typeof Blob||"undefined"==typeof Worker)&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),N.numOfWorkers=0),new Promise((function(L,Pt){try{Ct.init(N,(function(){Gn.once("processed",(function(N){St.stop(),Rt&&Rt.call(null,N),L(N)}),!0),St.start()}),null,St)}catch(L){Pt(L)}}))},get default(){return br},Readers:St,CameraAccess:Jn,ImageDebug:Te.a,ImageWrapper:we.a,ResultCollector:tr};Rt.default=br}]).default}));var Rt=N;const Ct=N.Quagga;export{Ct as Quagga,Rt as default};

